import{a as We,b as M}from"./chunk-2UMG7IYV.js";import{b as Re,c as Ne,d as J}from"./chunk-B3QVFB63.js";import{c as Pe,m as Se,n as Me,o as Fe,q as Ie}from"./chunk-LAXI4DWS.js";import{a as Y,f as $,h as L,o as ke}from"./chunk-ZSUZL2E2.js";import{a as Ee}from"./chunk-7QS2YA2B.js";import{b as we,f as be,i as Ce,k as Te,s as ae}from"./chunk-CQPMUWRZ.js";import{$a as de,$b as V,Bb as c,Fa as a,Ib as le,Jb as ce,Lb as pe,Mb as O,Ob as C,Pb as l,Qb as me,Rb as p,Sb as Q,Tb as H,Ub as K,Vb as ge,Wa as D,Wb as ue,X as G,Xb as U,aa as h,ac as ye,bc as fe,cc as xe,dc as ve,e as Ve,eb as I,ec as he,fa as g,ga as u,ha as A,hc as T,ib as k,jb as N,kb as w,kc as P,lc as _,mb as b,mc as _e,nb as S,nc as X,ob as f,pb as r,qb as d,qc as De,ra as F,rb as v,sa as se,sb as E,tb as R,vb as x,zb as y}from"./chunk-4ENOABGI.js";var $e=(n,i)=>({"opacity-25":n,"opacity-5":i}),B=class n{food=_.required();isOdd=_(!1);removeFood=P();updateFoodWeight=P();noRemove=_(!1,{transform:De});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=D({type:n,selectors:[["food-row"]],inputs:{food:[1,"food"],isOdd:[1,"isOdd"],noRemove:[1,"noRemove"]},outputs:{removeFood:"removeFood",updateFoodWeight:"updateFoodWeight"},decls:17,vars:16,consts:[[1,"d-flex"],["iconSize","16px",1,"btn","btn-outline-warning","mx-1","align-self-center",3,"click","disabled","buttonIcon"],[1,"d-flex","align-items-center","ps-1",2,"min-width","100px","width","20%","font-size","12px"],[1,"row","g-0","fw-light","fst-italic","flex-grow-1","align-self-stretch",2,"font-size","12px"],[1,"col","col-2","align-self-stretch","text-center","align-content-center","m-0"],[1,"col","col-2","align-self-stretch","text-center","align-content-center"],["type","number","inputmode","numeric",1,"form-control","form-control-sm","text-center","p-0","border","border-success-subtle","bg-body","shadow-none",2,"border-radius","4px",3,"blur","value"]],template:function(e,t){if(e&1){let o=x();r(0,"div",0)(1,"button",1),y("click",function(){return g(o),u(!t.noRemove()&&t.removeFood.emit())}),d(),r(2,"div",2),l(3),d(),r(4,"div",3)(5,"div",4),l(6),d(),r(7,"div",5),l(8),d(),r(9,"div",5),l(10),d(),r(11,"div",5),l(12),d(),r(13,"div",5),l(14),d(),r(15,"div",5)(16,"input",6),y("blur",function(m){return g(o),u(t.updateFoodWeight.emit(m.target.value))}),d()()()()}if(e&2){O("bg-body-tertiary",t.isOdd()),a(),C(V(13,$e,!t.noRemove(),t.noRemove())),f("disabled",t.noRemove())("buttonIcon",t.noRemove()?"":"iconoir:trash"),a(2),p(" ",t.food().name," ");let o=t.food().weight*.01;a(3),p(" ",(t.food().protein*o).toFixed(1)," "),a(2),p(" ",(t.food().carbs*o).toFixed(1)," "),a(2),p(" ",(t.food().fats*o).toFixed(1)," "),a(2),p(" ",(t.food().fiber*o).toFixed(1)," "),a(2),p(" ",(t.food().calories*o).toFixed(1)," "),a(2),f("value",t.food().weight)}},dependencies:[$],encapsulation:2})};var z=class n{stats=_.required();fixedDecimals=_(1);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=D({type:n,selectors:[["total-row"]],inputs:{stats:[1,"stats"],fixedDecimals:[1,"fixedDecimals"]},decls:16,vars:6,consts:[[1,"d-flex"],[1,"fw-bold","text-muted","opacity-75","fst-italic",2,"width","130px"],[1,"row","g-0","flex-grow-1","fw-bold","text-muted","fst-italic","opacity-75",2,"font-size","12px"],[1,"col","col-2","text-center","align-content-center","bg-body-secondary"],[1,"col","col-2","text-center","align-content-center"]],template:function(e,t){e&1&&(E(0,"div",0)(1,"div",1),l(2,"Total"),R(),E(3,"div",2)(4,"div",3),l(5),R(),E(6,"div",4),l(7),R(),E(8,"div",3),l(9),R(),E(10,"div",4),l(11),R(),E(12,"div",3),l(13),R(),E(14,"div",4),l(15),R()()()),e&2&&(a(5),p(" ",t.stats().proteins.toFixed(t.fixedDecimals())," "),a(2),p(" ",t.stats().carbs.toFixed(t.fixedDecimals())," "),a(2),p(" ",t.stats().fats.toFixed(t.fixedDecimals())," "),a(2),p(" ",t.stats().fiber.toFixed(t.fixedDecimals())," "),a(2),p(" ",t.stats().calories.toFixed(t.fixedDecimals())," "),a(2),p(" ",t.stats().weight.toFixed(t.fixedDecimals())," "))},encapsulation:2})};function Le(n,i){if(n&1){let e=x();r(0,"food-row",15),y("updateFoodWeight",function(o){let s=g(e).$index,m=c();return u(m.updateFoodWeight.emit({foodIndex:s,newWeight:+o}))}),d()}if(n&2){let e=i.$implicit,t=i.$index;f("food",e)("isOdd",t%2!==0)}}var Z=class n{id=F(Ee());recipe=_.required();updateFoodWeight=P();removeRecipe=P();recipeStats(){return ke(this.recipe())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=D({type:n,selectors:[["diary-recipe"]],inputs:{recipe:[1,"recipe"]},outputs:{updateFoodWeight:"updateFoodWeight",removeRecipe:"removeRecipe"},decls:18,vars:8,consts:[["collapsible",""],[1,"accordion","accordion-flush",2,"--bs-accordion-active-bg","rgba(7, 60, 130, 0.5)",3,"id"],[1,"accordion-item"],[1,"accordion-header","d-flex","align-items-center"],["buttonIcon","iconoir:trash","iconSize","16px",1,"btn","btn-outline-warning","btn-sm","opacity-25","mx-1",3,"click"],["type","button","data-bs-toggle","collapse",1,"accordion-button","collapsed","p-1","shadow-none"],[1,"opacity-75","w-100","d-flex"],[1,"mx-auto","text-center","text-primary-emphasis","text-truncate"],[1,"d-flex","align-items-center","gap-1","justify-content-center",2,"width","34px"],["icon","icon-park-outline:chart-proportion","size","16px",1,"text-success"],[1,"text-muted",2,"font-size","10px"],[1,"accordion-collapse","collapse","bg-body-secondary",3,"id"],["noRemove","",3,"food","isOdd"],[1,"bg-body"],[3,"stats","fixedDecimals"],["noRemove","",3,"updateFoodWeight","food","isOdd"]],template:function(e,t){if(e&1){let o=x();r(0,"div",1)(1,"div",2)(2,"h2",3)(3,"button",4),y("click",function(){return g(o),u(t.removeRecipe.emit())}),d(),r(4,"button",5)(5,"div",6)(6,"div",7),l(7),d()()(),r(8,"div",8),v(9,"iconify",9),r(10,"div",10),l(11),d()()(),r(12,"div",11,0),b(14,Le,1,2,"food-row",12,w),r(16,"div",13),v(17,"total-row",14),d()()()()}e&2&&(f("id","accordionFlushRecipe-"+t.id()),a(4),I("data-bs-target","#flush-collapse-"+t.id()),a(3),p(" ",t.recipe().name," "),a(4),me(t.recipe().portions),a(),f("id","flush-collapse-"+t.id()),I("data-bs-parent","#accordionFlushRecipe-"+t.id()),a(2),S(t.recipe().foods),a(3),f("stats",t.recipeStats())("fixedDecimals",0))},dependencies:[B,z,Y,$],encapsulation:2})};var Je=(n,i,e,t,o)=>({"border-warning":n,"text-primary":i,"fw-bold":e,"fst-normal":t,"bg-body-secondary":o});function Be(n,i){if(n&1){let e=x();r(0,"div",4),y("click",function(){let o=g(e).$implicit,s=c();return u(s.selectWeekDay(o))}),r(1,"div",5),l(2),d(),v(3,"div",6),d()}if(n&2){let e=i.$implicit,t=i.$index,o=c();C(fe(5,Je,o.isDaySelected(e),o.isTodayLbl(e),o.isTodayLbl(e),o.isTodayLbl(e),t===5||t===6)),a(2),p("",e,"."),a(),pe("background-color",o.getIndicatorStatusColor(e))}}var ee=class n{weekdays=["Mo","Tu","We","Th","Fr","Sa","Su"];calendar=h(Fe);selectedDate=X();selectedDayJs=T(()=>M.fromNgbDateStruct(this.selectedDate()));ngOnInit(){this.selectedDate.set(this.calendar.getToday())}isDaySelected(i){let e=M.getStartOfToday();return i===this.weekdays[this.selectedDayJs().day()===0?6:this.selectedDayJs().day()-1]&&e.isoWeek()===this.selectedDayJs().isoWeek()}isTodayLbl(i){let e=M.getStartOfToday();return i===this.weekdays[e.day()===0?6:e.day()-1]}selectWeekDay(i){let e=this.weekdays.indexOf(i);if(M.getStartOfToday().isoWeek()!==this.selectedDayJs().isoWeek())return;let o=this.selectedDayJs().isoWeekday(e+1);this.selectedDate.set({day:o.date(),month:o.month()+1,year:o.year()})}diaryLogService=h(J);getIndicatorStatusColor(i){let e=this.diaryLogService.hasFoodOnDate(this.selectedDayJs().isoWeekday(this.weekdays.indexOf(i)+1).toISOString()),t=this.diaryLogService.hasWeightInOnDate(this.selectedDayJs().isoWeekday(this.weekdays.indexOf(i)+1).toISOString());return e&&t?"rgba(60, 140, 70)":e||t?"rgba(150, 120, 70)":"rgba(90, 90, 90)"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=D({type:n,selectors:[["weekdays"]],inputs:{selectedDate:[1,"selectedDate"]},outputs:{selectedDate:"selectedDateChange"},decls:5,vars:1,consts:[[1,"bg-secondary-subtle","p-1","user-select-none"],[1,"d-flex","justify-content-between"],[1,"weekday","bg-body","cursor-pointer",3,"class"],[3,"selectedDateChange","selectedDate"],[1,"weekday","bg-body","cursor-pointer",3,"click"],[1,"text-center"],[1,"rounded","m-auto",2,"width","10px","height","10px"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1),b(2,Be,4,11,"div",2,w),r(4,"date-picker",3),K("selectedDateChange",function(s){return H(t.selectedDate,s)||(t.selectedDate=s),s}),d()()()),e&2&&(a(2),S(t.weekdays),a(2),Q("selectedDate",t.selectedDate))},dependencies:[We],styles:[".weekday[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;font-size:14px;border:2px solid transparent;transition:border .3s;font-style:italic}"]})};var re=Ve(Pe());var te=class{weightFormulaBackDays=7};var ie=class n{options=F(new te);constructor(){this.loadOptions()}loadOptions(){let i=localStorage.getItem("options");i&&this.options.set(JSON.parse(i))}saveOptions(){localStorage.setItem("options",JSON.stringify(this.options()))}setOptions(i){this.options.set(i),this.saveOptions()}static \u0275fac=function(e){return new(e||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var ze=(n,i)=>({"text-info-emphasis":n,"text-warning-emphasis":i});function je(n,i){if(n&1&&(A(),v(0,"line",10)),n&2){let e=c(),t=e.$implicit,o=e.$index,s=c(3);I("x1",`${96/(s.weights().length-1)*o+2}%`)("y1",`${s.weightsRange()===0?50:(s.weightsMax()+s.weightsRange()*.1-t)/(s.weightsRange()*1.5)*100}%`)("x2",`${96/(s.weights().length-1)*(o+1)+2}%`)("y2",`${s.weightsRange()===0?50:(s.weightsMax()+s.weightsRange()*.1-s.weights()[o+1])/(s.weightsRange()*1.5)*100}%`)}}function Ae(n,i){if(n&1&&(A(),r(0,"text",11),l(1),d()),n&2){let e=c(),t=e.$implicit,o=e.$index,s=c(3);I("x",`${88/s.Math.max(s.weights().length-1,1)*o+6}%`),a(),p(" ",t.toFixed(1)," ")}}function qe(n,i){if(n&1&&(A(),v(0,"circle",9),k(1,je,1,4,":svg:line",10),k(2,Ae,2,2,":svg:text",11)),n&2){let e=i.$implicit,t=i.$index,o=c(3);I("cx",`${96/o.Math.max(o.weights().length-1,1)*t+2}%`)("cy",`${o.weightsRange()===0?50:(o.weightsMax()+o.weightsRange()*.1-e)/(o.weightsRange()*1.5)*100}%`),a(),N(t<o.weights().length-1?1:-1),a(),N(e?2:-1)}}function Ge(n,i){if(n&1&&(A(),r(0,"svg",1),b(1,qe,3,4,null,null,w),d()),n&2){let e=c(2);a(),S(e.weights())}}function Qe(n,i){if(n&1){let e=x();k(0,Ge,3,0,":svg:svg",1),r(1,"div",2)(2,"div",3),v(3,"iconify",4),r(4,"div",5),l(5),d()(),r(6,"div",6),v(7,"iconify",7),r(8,"input",8),y("blur",function(o){g(e);let s=c();return u(s.diaryLogService.updateCurrentWeight(s.isoDate(),o.target.value))}),d()()()}if(n&2){let e=c();N(e.weights().length?0:-1),a(5),p(" ",e.diaryLogService.getWeightByFormula(e.isoDate(),e.optionsService.options().weightFormulaBackDays).toFixed(1)," kg "),a(2),C(V(7,ze,e.diaryLogService.getCurrentWeight(e.isoDate()),!e.diaryLogService.getCurrentWeight(e.isoDate()))),a(),f("placeholder",e.diaryLogService.getCurrentWeight(e.isoDate())?"kg":"?")("disabled",e.weightInputDisabled())("value",e.diaryLogService.getCurrentWeight(e.isoDate()))}}var oe=class n{Math=Math;diaryLogService=h(J);optionsService=h(ie);isoDate=_("");weights(){return this.isoDate()?this.diaryLogService.getWeights(this.isoDate(),11):[]}weightsMax=T(()=>Math.max(...this.weights()));weightsMin=T(()=>Math.min(...this.weights()));weightsRange=T(()=>this.weightsMax()-this.weightsMin());weightInputDisabled(){return(0,re.default)().utc().startOf("day").isBefore((0,re.default)(this.isoDate()).utc())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=D({type:n,selectors:[["weight-in-bar"]],inputs:{isoDate:[1,"isoDate"]},decls:2,vars:1,consts:[[1,"rounded","bg-body-secondary"],[1,"w-100",2,"pointer-events","none","height","64px"],[1,"d-flex"],[1,"flex-grow-1","px-1","d-flex","align-items-center","mt-3"],["icon","ph:tilde-fill",1,"opacity-50"],[1,"ms-1","fw-semibold","opacity-75",2,"font-size","14px"],[1,"position-relative","d-flex","justify-content-center","align-items-center","overflow-hidden","me-1",2,"width","48px","height","48px"],["icon","iconoir:weight","size","3rem",1,"position-absolute","z-0","opacity-55",2,"transform","scaleX(1.25)"],["type","number","inputmode","numeric",1,"form-control","text-center","p-0","shadow-none","z-1","border-0",2,"width","44px","background-color","transparent","margin-top","10px",3,"blur","placeholder","disabled","value"],["r","4","fill","rgba(from var(--bs-info-text-emphasis) r g b / 0.5)"],["stroke","rgba(from var(--bs-info-text-emphasis) r g b / 0.4)","stroke-width","1"],["y","96%","fill","rgba(from var(--bs-info-text-emphasis) r g b / 0.5)","font-size","12px","font-style","italic","text-anchor","middle"]],template:function(e,t){e&1&&(r(0,"div",0),k(1,Qe,9,10),d()),e&2&&(a(),N(t.weightInputDisabled()?-1:1))},dependencies:[Y],styles:["input[_ngcontent-%COMP%]{color:var(--bs-info-text-emphasis)}[_ngcontent-%COMP%]::placeholder{color:var(--bs-info-text-emphasis);font-style:italic;opacity:.4}"]})};var ne=class n{dayTemplate=F(void 0);constructor(){this.setTemplate(),this.loadDayTemplate()}setTemplate(){if(!localStorage.getItem("dayTemplate")){let e=new Ne;e.entries.push({position:1,meal:new L("","Meal I"),recipes:[]}),e.entries.push({position:2,meal:new L("","Meal II"),recipes:[]}),e.entries.push({position:3,meal:new L("","Meal III"),recipes:[]}),e.entries.push({position:4,meal:new L("","Meal IV"),recipes:[]}),e.entries.push({position:5,meal:new L("","Snacks"),recipes:[]}),localStorage.setItem("dayTemplate",JSON.stringify(e))}}loadDayTemplate(){this.dayTemplate.set(JSON.parse(localStorage.getItem("dayTemplate")))}getDayTemplate(){return this.dayTemplate()}static \u0275fac=function(e){return new(e||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var He=["editMealNoteDialog"],Ke=(n,i,e)=>({"fst-italic":n,"fw-semibold":i,"text-muted":e}),Ue=(n,i)=>({"bg-body-secondary":n,"bg-dark-subtle":i});function Xe(n,i){if(n&1){let e=x();r(0,"div",19)(1,"button",25),y("click",function(){g(e),c();let o=U(0),s=c();return u(s.toggleEditMealNoteDialog(o.id,o.note))}),d(),r(2,"input",26),y("input",function(o){g(e);let s=c().$implicit,m=c();return u(m.updateMealName(s.position,o.target.value))}),d()()}if(n&2){c();let e=U(0);a(),O("btn-outline-success",e.note),a(),f("value",e.name)}}function Ye(n,i){if(n&1){let e=x();r(0,"diary-recipe",27),y("updateFoodWeight",function(o){let s=g(e).$index,m=c().$implicit,j=c();return u(j.updateRecipeFoodWeight(m.position,s,o.foodIndex,o.newWeight))})("removeRecipe",function(){let o=g(e).$index,s=c().$implicit,m=c();return u(m.removeRecipeFromPosition(s.position,o))}),d()}if(n&2){let e=i.$implicit;f("recipe",e)}}function Ze(n,i){if(n&1){let e=x();r(0,"food-row",28),y("removeFood",function(){let o=g(e).$index,s=c().$implicit,m=U(0),j=c();return u(j.removeFood(s.position,o,m))})("updateFoodWeight",function(o){let s=g(e).$index,m=c().$implicit,j=c();return u(j.updateFoodWeight(m.position,s,o))}),d()}if(n&2){let e=i.$implicit,t=i.$index;f("food",e)("isOdd",t%2!==0)}}function et(n,i){if(n&1){let e=x();ge(0),r(1,"div",11)(2,"h2",14)(3,"button",15),y("click",function(){let o=g(e).$implicit,s=c();return u(s.toggleExpandedMeal(o.position))}),l(4),d(),r(5,"div",16)(6,"div",17)(7,"div",9),l(8),d(),r(9,"div",9),l(10),d(),r(11,"div",9),l(12),d(),r(13,"div",9),l(14),d(),r(15,"div",9),l(16),d(),r(17,"div",9),l(18),d()()()(),r(19,"div",18,1),k(21,Xe,3,3,"div",19),b(22,Ye,1,1,"diary-recipe",20,w),b(24,Ze,1,2,"food-row",21,w),r(26,"div",22)(27,"button",23),y("click",function(o){let s=g(e).$implicit,m=c();return o.stopPropagation(),u(m.addRecipe(s.position))}),l(28," Add recipe "),d(),r(29,"button",24),y("click",function(o){let s=g(e).$implicit,m=c();return o.stopPropagation(),u(m.addFood(s.position))}),l(30," Add food "),d()()()()}if(n&2){let e=i.$implicit,t=i.$index,o=c(),s=ue(o.getRespectiveMeal(e.position));a(3),O("collapsed",!o.isMealExpanded(e.position)),I("data-bs-target","#flush-collapse"+t),a(),p(" ",o.mealPositionMap[e.position]," "),a(2),C(V(17,Ue,!o.isMealExpanded(e.position),o.isMealExpanded(e.position)));let m=o.getPositionStats(e.position);a(2),p(" ",m.proteins.toFixed()," "),a(2),p(" ",m.carbs.toFixed()," "),a(2),p(" ",m.fats.toFixed()," "),a(2),p(" ",m.fiber.toFixed()," "),a(2),p(" ",m.calories.toFixed()," "),a(2),p(" ",m.weight.toFixed()," "),a(),O("show",o.isMealExpanded(e.position)),f("id","flush-collapse"+t),a(2),N(s?21:-1),a(),S(o.getRespectiveRecipes(e.position)),a(2),S(s==null?null:s.foods)}}function tt(n,i){if(n&1){let e=x();r(0,"textarea",29),y("input",function(o){g(e);let s=c();return u(s.updateMealNote(s.editNoteMealId(),o.target.value))}),d()}if(n&2){let e=c();f("value",e.editNoteMeal())}}var Oe=class n{diaryDate=_("");selectedDate=X(void 0);selectedDayJs=T(()=>this.selectedDate()&&M.fromNgbDateStruct(this.selectedDate()));isTodaySelected=T(()=>this.selectedDate()&&M.fromNgbDateStruct(this.selectedDate()).isSame(M.getStartOfToday(),"day"));ngAfterViewInit(){this.diaryDate()&&this.selectedDate.set(M.toNgbDateStruct(this.diaryDate()))}location=h(we);activatedRoute=h(Ce);constructor(){se(()=>{if(!this.selectedDate())return;let i=this.selectedDayJs();if(i){let e=this.router.createUrlTree([],{relativeTo:this.activatedRoute,queryParams:{diaryDate:i.toISOString()}}).toString();this.location.go(e)}})}dayTemplateService=h(ne);router=h(Te);addFood(i){this.router.navigate([ae.myFoods],{queryParams:{diaryDate:this.selectedDayJs().toISOString(),mealPosition:i}})}addRecipe(i){this.router.navigate([ae.recipes],{queryParams:{diaryDate:this.selectedDayJs().toISOString(),mealPosition:i}})}diaryLogService=h(J);mealPositionMap=Re;getRespectiveMeal(i){return this.diaryLogService.getRespectiveMeal(this.selectedDayJs().toISOString(),i)}getRespectiveRecipes(i){return this.diaryLogService.getRespectiveRecipes(this.selectedDayJs().toISOString(),i)}updateMealName(i,e){this.diaryLogService.updateMealName(this.selectedDayJs().toISOString(),i,e)}removeFood(i,e,t){this.diaryLogService.removeFood(this.selectedDayJs().toISOString(),i,e),t.foods.length||this.diaryLogService.clearMeal(this.selectedDayJs().toISOString(),i)}updateFoodWeight(i,e,t){this.diaryLogService.updateFoodWeight(this.selectedDayJs().toISOString(),i,e,+t)}getPositionStats(i){return this.diaryLogService.getPositionStats(this.selectedDayJs().toISOString(),i)}getDayStats(){return this.diaryLogService.getDayStats(this.selectedDayJs().toISOString())}toggleExpandedMeal(i){this.diaryLogService.toggleExpandedMeal(this.selectedDayJs().toISOString(),i)}isMealExpanded(i){let e=this.diaryLogService.getExpandedMeal();return e?.isoDate===this.selectedDayJs().toISOString()&&e?.mealPosition===i}modalService=h(Ie);editMealNoteDialogRef=_e("editMealNoteDialog");editNoteMealId=F("");editNoteMeal=F("");toggleEditMealNoteDialog(i,e){this.editNoteMealId.set(i),this.editNoteMeal.set(e),this.modalService.open(this.editMealNoteDialogRef(),{size:"sm",centered:!0}).result.catch(()=>{this.editNoteMealId.set(""),this.editNoteMeal.set("")})}updateMealNote(i,e){this.diaryLogService.updateMealNote(this.selectedDayJs().toISOString(),i,e)}updateRecipeFoodWeight(i,e,t,o){this.diaryLogService.updateRecipeFoodWeight(this.selectedDayJs().toISOString(),i,e,t,o)}removeRecipeFromPosition(i,e){this.diaryLogService.removeRecipeFromPosition(this.selectedDayJs().toISOString(),i,e)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=D({type:n,selectors:[["diary"]],viewQuery:function(e,t){e&1&&le(t.editMealNoteDialogRef,He,5),e&2&&ce()},inputs:{diaryDate:[1,"diaryDate"],selectedDate:[1,"selectedDate"]},outputs:{selectedDate:"selectedDateChange"},decls:29,vars:13,consts:[["editMealNoteDialog",""],["collapsible",""],[1,"content-wrapper"],[1,"bg-body-tertiary","text-center","opacity-75",2,"font-size","14px","line-height","16px"],[3,"selectedDateChange","selectedDate"],[1,"border-bottom"],[1,"d-flex"],[2,"width","130px"],[1,"row","g-0","flex-grow-1","fw-bold","text-muted","fst-italic","opacity-25","bg-body-secondary",2,"font-size","12px"],[1,"col","col-2","align-self-center","text-center"],["id","accordionFlush",1,"accordion","accordion-flush"],[1,"accordion-item"],[3,"stats","fixedDecimals"],[3,"isoDate"],[1,"accordion-header","d-flex","align-items-center"],["type","button","data-bs-toggle","collapse",1,"accordion-button","p-1","text-truncate","text-muted","fw-bold","opacity-75","shadow-none",2,"width","130px",3,"click"],[1,"flex-grow-1","align-self-stretch"],[1,"row","g-0","h-100","fw-light","fst-italic",2,"font-size","12px","transition","background-color 0.3s"],["data-bs-parent","#accordionFlush",1,"accordion-collapse","collapse","bg-body-secondary","rounded",3,"id"],[1,"d-flex","align-items-center","p-1","gap-1","bg-body-tertiary"],[3,"recipe"],[3,"food","isOdd"],[1,"p-1","bg-body-tertiary","d-flex","gap-1"],["buttonIcon","pajamas:recipe","iconSize","24px",1,"btn","btn-outline-primary","btn-sm","opacity-60","flex-grow-1",3,"click"],["buttonIcon","iconoir:lens-plus","iconSize","24px",1,"btn","btn-outline-success","btn-sm","opacity-80","flex-grow-1",3,"click"],["buttonIcon","iconoir:notes","iconSize","16px",1,"btn","btn-outline-secondary",3,"click"],["type","text",1,"form-control","form-control-sm","shadow-none","text-center","bg-dark-subtle",3,"input","value"],[3,"updateFoodWeight","removeRecipe","recipe"],[3,"removeFood","updateFoodWeight","food","isOdd"],["rows","3","placeholder","Meal note",1,"form-control","form-control-sm","meal-name-input","text-center",3,"input","value"]],template:function(e,t){if(e&1){let o=x();r(0,"div",2)(1,"div",3),l(2),xe(3,"date"),d(),r(4,"weekdays",4),K("selectedDateChange",function(m){return g(o),H(t.selectedDate,m)||(t.selectedDate=m),u(m)}),d(),v(5,"div",5),r(6,"div",6),v(7,"div",7),r(8,"div",8)(9,"div",9),l(10,"P"),d(),r(11,"div",9),l(12,"C"),d(),r(13,"div",9),l(14,"Fa"),d(),r(15,"div",9),l(16,"Fi"),d(),r(17,"div",9),l(18,"KCal"),d(),r(19,"div",9),l(20,"G"),d()()(),v(21,"div",5),r(22,"div",10),b(23,et,31,20,"div",11,w),d(),v(25,"total-row",12)(26,"weight-in-bar",13),d(),de(27,tt,1,1,"ng-template",null,0,he)}if(e&2){let o;a(),C(ye(9,Ke,!t.isTodaySelected(),t.isTodaySelected(),!t.isTodaySelected())),a(),p(" ",ve(3,7,(o=t.selectedDayJs())==null?null:o.toISOString())," "),a(2),Q("selectedDate",t.selectedDate),a(19),S(t.dayTemplateService.getDayTemplate().entries),a(2),f("stats",t.getDayStats())("fixedDecimals",0),a(),f("isoDate",t.selectedDayJs().toISOString())}},dependencies:[$,Me,Se,B,Z,z,ee,oe,be],encapsulation:2})};export{Oe as Diary};
