import{d as E}from"./chunk-NQENWT5V.js";import{a as X}from"./chunk-3OJFEKT3.js";import{P as Z,Q as ee,e as O,h as G,j as W,m as q,r as K,w as J,x as k,y as Q,z as Y}from"./chunk-PXXMBKHJ.js";import{l as U,t as S}from"./chunk-MAWMYTZY.js";import{a as H}from"./chunk-TTUD5ZDE.js";import{Fb as m,Ga as n,Hb as g,Rb as s,Sb as T,Tb as z,Ub as N,Vb as d,Wb as V,Xa as P,Xb as y,Yb as $,Zb as L,_b as R,a as I,aa as u,ec as j,fa as b,fc as A,ga as f,jb as x,kb as _,lb as F,nb as v,nc as B,ob as w,pb as D,qb as i,ra as M,rb as r,rc as h,sb as p,yb as C}from"./chunk-HXGKTDM5.js";var oe=(a,t)=>({"text-decoration":a,"letter-spacing":t,"text-underline-offset":"2px"}),ie=a=>({"fst-italic":a});function re(a,t){if(a&1){let e=C();i(0,"li")(1,"span",20),m("click",function(){let c=b(e).$implicit,l=g();return f(l.selectedMacroCategory.set(c))}),d(2),r()()}if(a&2){let e=t.$implicit,o=g();s("background-color",o.foodMacroCategoryMap[e.value].bgColor);let c=e.label===o.selectedMacroCategory().label;n(),z(A(7,oe,c?"underline":"unset",c?"1px":"0.25px")),N(j(10,ie,c)),n(),y(" ",e.label," ")}}function ne(a,t){if(a&1){let e=C();i(0,"a",21),m("click",function(){b(e);let c=g();return f(c.addFoodAndGoogle())}),d(1," Google the product "),r()}}function ae(a,t){a&1&&p(0,"iconify",28)}function ce(a,t){a&1&&p(0,"iconify",28)}function de(a,t){if(a&1){let e=C();i(0,"tr",22),p(1,"td",23),r(),i(2,"tr",22)(3,"td",24)(4,"button",25),m("click",function(){let c=b(e).$implicit,l=g();return f(l.deleteFood(c))}),r()(),i(5,"td",26),m("click",function(){let c=b(e).$implicit,l=g();return f(l.addFoodToDiaryOrRecipe(c))}),i(6,"div",27),x(7,ae,1,0,"iconify",28),i(8,"div",29),d(9),r(),x(10,ce,1,0,"iconify",28),r()(),i(11,"td",24)(12,"button",30),m("click",function(){let c=b(e).$implicit,l=g();return f(l.editFood(c))}),r()()(),i(13,"tr",31)(14,"td",32),d(15),r(),i(16,"td",33),d(17),r(),i(18,"td",34),d(19),r(),i(20,"td",35),d(21),r(),i(22,"td",36),d(23),r()()}if(a&2){let e=t.$implicit,o=g();n(5),s("background-color",o.foodMacroCategoryMap[e.macroCategory].bgColor),T("text-decoration-underline",!!o.diaryDate()||!!o.recipeId()),n(2),_(e.barcode?7:-1),n(2),V(e.name),n(),_(e.barcode?10:-1),n(4),s("background-color",`rgb(from ${o.foodMacroCategoryMap[e.macroCategory].bgColor} r g b / 0.25)`),n(),y(" ",e.protein," "),n(),s("background-color",`rgb(from ${o.foodMacroCategoryMap[e.macroCategory].bgColor} r g b / 0.2)`),n(),y(" ",e.carbs," "),n(),s("background-color",`rgb(from ${o.foodMacroCategoryMap[e.macroCategory].bgColor} r g b / 0.25)`),n(),y(" ",e.fats," "),n(),s("background-color",`rgb(from ${o.foodMacroCategoryMap[e.macroCategory].bgColor} r g b / 0.25)`),n(),y(" ",e.fiber," "),n(),s("background-color",`rgb(from ${o.foodMacroCategoryMap[e.macroCategory].bgColor} r g b / 0.25)`),n(),y(" ",e.calories," ")}}function le(a,t){a&1&&(i(0,"tr")(1,"td",37),d(2," No foods found in selected category... "),r()())}var te=class a{modalService=u(K);myFoodsService=u(J);recipesService=u(ee);foodMacroCategoryMap=Q;macroCategories=Object.keys(k).filter(t=>!isNaN(Number(t))).map(t=>({label:k[t],value:+t}));selectedMacroCategory=M(this.macroCategories[0]);nameFilter=M("");foods=B(()=>this.myFoodsService.foods().filter(t=>t.macroCategory===this.selectedMacroCategory().value||this.selectedMacroCategory().value===0).filter(t=>t.name?.toLowerCase().includes(this.nameFilter().toLowerCase())).sort((t,e)=>t.macroCategory-e.macroCategory||t.name?.localeCompare(e.name)));diaryDate=h("");mealPosition=h(0);recipeId=h("");addFood(){this.modalService.open(E).componentInstance.food.set(new Y(void 0,this.nameFilter().capitalize()))}addFoodAndGoogle(){window.open(this.getProductLink(),"_blank"),this.addFood()}diaryLogService=u(Z);router=u(U);addFoodToDiaryOrRecipe(t){this.diaryDate()&&this.mealPosition()?(this.diaryLogService.addFood(this.diaryDate(),+this.mealPosition(),t),this.diaryLogService.updateMealTime(this.diaryDate(),this.mealPosition()),this.router.navigate([S.diary],{queryParams:{diaryDate:this.diaryDate()}})):this.recipeId()&&(this.recipesService.addFood(this.recipeId(),t.id),this.router.navigate([S.recipes]))}editFood(t){this.modalService.open(E).componentInstance.food.set(I({barcode:null},t))}deleteFood(t){this.myFoodsService.deleteFood(t)}getProductLink(){return`https://www.google.com/search?q=show+me+data+for+${encodeURI(this.nameFilter())}+100g+of+product+with+macro+order+list+protein+-+carbs+-+fats+-+fiber+-+Kcal+as+table+header`}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=P({type:a,selectors:[["ng-component"]],inputs:{diaryDate:[1,"diaryDate"],mealPosition:[1,"mealPosition"],recipeId:[1,"recipeId"]},decls:34,vars:7,consts:[[1,"content-wrapper","d-flex","justify-content-between","gap-2","p-1","bg-body-tertiary","border-bottom"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-secondary","dropdown-toggle","bmw","align-self-center","p-1"],[1,"dropdown-menu","p-0","overflow-hidden","shadow-sm",2,"min-width","120px"],[3,"background-color"],[1,"position-relative"],["type","text","placeholder","Filter by name",1,"form-control","p-1",3,"ngModelChange","ngModel"],["buttonIcon","mdi:close",1,"btn","btn-sm","btn-secondary","p-0","position-absolute","end-0","top-50","translate-middle-y","me-2","z-1",3,"click","iconSize"],[1,"content-wrapper","overflow-y-auto",2,"height","calc(100dvh - 141px)"],[1,"d-block","p-3","fw-semibold","opacity-75","mx-auto",2,"width","fit-content","cursor","pointer","letter-spacing","1px"],[1,"table","table-sm","table-borderless","mb-0",2,"font-size","12px","table-layout","fixed"],[1,"position-sticky","z-1",2,"top","0px"],["scope","col",1,"bg-gradient",2,"width","10%"],["scope","col",1,"text-center","bg-gradient",2,"color","rgb(80, 100, 240)","width","16%"],["scope","col",1,"text-center","bg-gradient",2,"color","rgb(220, 220, 90)","width","16%"],["scope","col",1,"text-center","bg-gradient",2,"color","rgb(200, 160, 30)","width","16%"],["scope","col",1,"text-center","bg-gradient",2,"color","rgb(100, 130, 20)","width","16%"],["scope","col",1,"text-center","bg-gradient",2,"color","rgb(150, 140, 180)","width","16%"],[1,"btn","btn-outline-success","p-2","rounded-top-0","w-100","d-flex","justify-content-between","mt-auto","opacity-85",3,"click"],["icon","iconoir:lens-plus"],["icon","mdi:plus"],[1,"dropdown-item","cursor-pointer","px-2",3,"click"],[1,"d-block","p-3","fw-semibold","opacity-75","mx-auto",2,"width","fit-content","cursor","pointer","letter-spacing","1px",3,"click"],["scope","row",1,"opacity-90"],["colspan","7",1,"bg-dark",2,"padding","1px 0"],["rowspan","2",1,"bg-dark-subtle"],["iconSize","16px","buttonIcon","iconoir:trash",1,"btn","btn-outline-warning","border-0","p-0","opacity-30","m-auto",3,"click"],["colspan","5",1,"py-1","text-center","opacity-90","fw-semibold",2,"font-size","16px","text-underline-offset","2px","text-shadow","0 0 3px rgba(0, 0, 0, 0.5)",3,"click"],[1,"d-flex","justify-content-between","align-items-center"],["icon","teenyicons:barcode-outline","size","16px",1,"ms-1","opacity-40"],[1,"mx-auto"],["iconSize","24px","buttonIcon","iconoir:edit",1,"btn","p-0","rounded","m-auto","opacity-30",3,"click"],["scope","row"],[1,"text-truncate","text-center","p-0",2,"font-size","12px","text-shadow","0 0 2px rgba(0, 0, 0, 0.5)","color","rgb(80, 100, 240)"],[1,"text-truncate","text-center","p-0",2,"font-size","12px","text-shadow","0 0 2px rgba(0, 0, 0, 0.5)","color","rgb(220, 220, 90)"],[1,"text-truncate","text-center","p-0",2,"font-size","12px","text-shadow","0 0 2px rgba(0, 0, 0, 0.5)","color","rgb(200, 160, 30)"],[1,"text-truncate","text-center","p-0",2,"font-size","12px","text-shadow","0 0 2px rgba(0, 0, 0, 0.5)","color","rgb(100, 130, 20)"],[1,"text-truncate","text-center","p-0",2,"font-size","12px","text-shadow","0 0 2px rgba(0, 0, 0, 0.5)","color","rgb(150, 140, 180)"],["colspan","8",1,"fst-italic","text-center","bg-body-tertiary","text-muted"]],template:function(e,o){if(e&1&&(i(0,"div",0)(1,"button",1),d(2),r(),i(3,"ul",2),v(4,re,3,12,"li",3,F),r(),i(6,"div",4)(7,"input",5),R("ngModelChange",function(l){return L(o.nameFilter,l)||(o.nameFilter=l),l}),r(),i(8,"button",6),m("click",function(){return o.nameFilter.set("")}),r()()(),i(9,"div",7),x(10,ne,2,0,"a",8),i(11,"table",9)(12,"thead",10)(13,"tr"),p(14,"th",11),i(15,"th",12),d(16," Prot "),r(),i(17,"th",13),d(18," Carbs "),r(),i(19,"th",14),d(20," Fats "),r(),i(21,"th",15),d(22," Fiber "),r(),i(23,"th",16),d(24," KCal "),r(),p(25,"th",11),r()(),i(26,"tbody"),v(27,de,24,22,null,null,F,!1,le,3,0,"tr"),r()()(),i(30,"button",17),m("click",function(){return o.addFood()}),p(31,"iconify",18),d(32," Add a food "),p(33,"iconify",19),r()),e&2){let c;n(),s("background-color",o.foodMacroCategoryMap[o.selectedMacroCategory().value].bgColor),n(),y(" ",o.selectedMacroCategory().label," "),n(2),w(o.macroCategories),n(3),$("ngModel",o.nameFilter),n(),D("iconSize","16px"),n(2),_((c=o.foods())!=null&&c.length?-1:10),n(17),w(o.foods())}},dependencies:[X,q,O,G,W,H],styles:['thead[_ngcontent-%COMP%]:after{content:"";display:block;height:2px;background-color:#aaa;width:100%;position:absolute;bottom:0;left:0}']})};export{te as MyFoods};
