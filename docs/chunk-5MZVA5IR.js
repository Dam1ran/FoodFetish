import{a as re,b as ae}from"./chunk-V63QNJY2.js";import{a as te,b as A,c as ie,d as R,e as ne}from"./chunk-RI6AJ6TR.js";import{a as ee}from"./chunk-2CKLMTUT.js";import{a as j,b as oe}from"./chunk-ET3JPIE6.js";import{a as K}from"./chunk-3OJFEKT3.js";import{A as Q,M as X,P as Y,Q as Z,w as q}from"./chunk-PXXMBKHJ.js";import{f as $,l as P,t as J}from"./chunk-MAWMYTZY.js";import{a as H}from"./chunk-TTUD5ZDE.js";import{Fb as m,Ga as c,Hb as v,Ob as z,Pb as G,Qb as F,Sb as M,Tb as O,Ub as g,Vb as l,Xa as U,Xb as y,aa as S,ec as V,fa as p,fc as _,ga as u,ic as N,jb as h,jc as W,kb as b,lb as T,nb as k,nc as L,ob as I,oc as B,pb as x,qb as i,rb as o,sb as D,sc as C,yb as w}from"./chunk-HXGKTDM5.js";var ve=["jsonUploadFoods"],ye=["jsonUploadRecipes"],ge=["jsonUploadDiary"],le=(n,r)=>({"text-info-emphasis":n,"text-warning-emphasis":r}),se=n=>({"bg-body":n}),ce=(n,r)=>({"opacity-90":n,"opacity-10":r}),ue=(n,r)=>({"text-decoration":n,"letter-spacing":r,"text-underline-offset":"2px"}),me=(n,r)=>({"fst-italic":n,"bg-body-tertiary":r}),de=(n,r)=>({"btn-secondary":n,"btn-outline-secondary":r});function _e(n,r){if(n&1&&(i(0,"span",43),l(1),N(2,"date"),o(),i(3,"span",44),l(4),o()),n&2){let t=v();c(),y(" ",W(2,2,r.toISOString())," "),c(3),y("(",t.years(),")")}}function fe(n,r){n&1&&(i(0,"span",20),l(1," Date of birth "),o())}function Se(n,r){if(n&1&&l(0),n&2){let t=v();y(" ",t.activityLevelMap[t.optionsService.options().activityLevel].description," ")}}function xe(n,r){n&1&&l(0," Choose activity level ")}function he(n,r){if(n&1){let t=w();i(0,"li",46)(1,"span",47),m("click",function(){p(t);let a=v().$implicit,s=v();return u(s.optionsService.setActivityLevel(a.value))}),l(2),o()()}if(n&2){let t=v(),e=t.$implicit,a=t.$index;M("mt-1",a!==0);let s=e.value===v().optionsService.options().activityLevel;c(),O(_(7,ue,s?"underline":"unset",s?"1px":"0.25px")),g(_(10,me,s,a%2===0)),c(),y(" ",e.label," ")}}function be(n,r){if(n&1&&h(0,he,3,13,"li",45),n&2){let t=r.$implicit;b(t.value!==0?0:-1)}}function we(n,r){n&1&&l(0," Revised Harris-Benedict equation ")}function De(n,r){n&1&&l(0," Katch-McArdle equation ")}function Fe(n,r){if(n&1&&l(0),n&2){let t=v();y(" ",t.weightGoalMap[t.optionsService.options().weightGoal].description," ")}}function Ce(n,r){n&1&&l(0," Choose your weight goal ")}function Ee(n,r){if(n&1){let t=w();i(0,"li",46)(1,"span",47),m("click",function(){p(t);let a=v().$implicit,s=v();return u(s.optionsService.setWeightGoal(a.value))}),l(2),o()()}if(n&2){let t=v(),e=t.$implicit,a=t.$index;M("mt-1",a!==0);let s=e.value===v().optionsService.options().weightGoal;c(),O(_(7,ue,s?"underline":"unset",s?"1px":"0.25px")),g(_(10,me,s,a%2===0)),c(),y(" ",e.label," ")}}function Te(n,r){if(n&1&&h(0,Ee,3,13,"li",45),n&2){let t=r.$implicit;b(t.value!==0?0:-1)}}function ke(n,r){if(n&1){let t=w();i(0,"button",48),m("click",function(){p(t);let a=v();return u(a.googleDriveService.signIn())}),l(1," Sign in with Google "),o()}}function Ie(n,r){if(n&1){let t=w();i(0,"button",49),m("click",function(){p(t);let a=v();return u(a.googleDriveService.uploadToDrive())}),l(1," Upload to Drive "),o(),i(2,"button",50),m("click",function(){p(t);let a=v();return u(a.googleDriveService.downloadFromDrive())}),l(3," Download from Drive "),o(),i(4,"div",51),l(5),o(),i(6,"button",52),m("click",function(){p(t);let a=v();return u(a.googleDriveService.signOut())}),l(7," Sign out "),o()}if(n&2){let t=v();g(_(7,de,!t.googleDriveService.isSyncing(),t.googleDriveService.isSyncing())),x("disabled",t.googleDriveService.isSyncing()),c(2),g(_(10,de,!t.googleDriveService.isSyncing(),t.googleDriveService.isSyncing())),x("disabled",t.googleDriveService.isSyncing()),c(3),y(" ",t.googleDriveService.userEmail()," ")}}var pe=class n{toastsService=S(re);foodsService=S(q);recipesService=S(Z);diaryLogService=S(Y);imageStoreService=S(oe);googleDriveService=S(ae);optionsService=S(ne);jsonUploadFoodsInput=C("jsonUploadFoods");onLoadFoodsFromFile(r){let t=r.target;if(t.files?.length!==1){this.jsonUploadFoodsInput().nativeElement.value="";return}let e=t.files?.[0],a=new FileReader;a.onload=s=>{let d=s.target?.result;if(d){let f=JSON.parse(d);if(!Array.isArray(f)||!f.every(E=>Q(E))){this.toastsService.showAsWarning("Wrong food data",{headerText:null,delayMs:5e3}),console.warn("Wrong food data");return}if(this.foodsService.setFoods(f),this.foodsService.foods()?.length===1){this.toastsService.showAsInformation("Loaded 1 food",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.foodsService.foods()?.length} foods`,{headerText:null,delayMs:5e3})}},a.readAsText(e),this.jsonUploadFoodsInput().nativeElement.value=""}jsonUploadRecipesInput=C("jsonUploadRecipes");onLoadRecipesFromFile(r){let t=r.target;if(t.files?.length!==1){this.jsonUploadRecipesInput().nativeElement.value="";return}let e=t.files?.[0],a=new FileReader;a.onload=s=>{let d=s.target?.result;if(d){let f=JSON.parse(d);if(!Array.isArray(f)||!f.every(E=>X(E))){this.toastsService.showAsWarning("Wrong recipes data",{headerText:null,delayMs:5e3}),console.warn("Wrong recipes data");return}if(this.recipesService.setRecipes(f),this.recipesService.recipes()?.length===1){this.toastsService.showAsInformation("Loaded 1 recipe",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.recipesService.recipes()?.length} recipes`,{headerText:null,delayMs:5e3})}},a.readAsText(e),this.jsonUploadRecipesInput().nativeElement.value=""}jsonUploadDiaryInput=C("jsonUploadDiary");onLoadDiaryFromFile(r){let t=r.target;if(t.files?.length!==1){this.jsonUploadDiaryInput().nativeElement.value="";return}let e=t.files?.[0],a=new FileReader;a.onload=s=>{let d=s.target?.result;if(d){let f=JSON.parse(d);if(!Array.isArray(f.diaryDays)){this.toastsService.showAsWarning("Wrong diary data",{headerText:null,delayMs:5e3}),console.warn("Wrong diary data");return}if(this.diaryLogService.setDiary(f),this.diaryLogService.diaryLog()?.diaryDays?.length===1){this.toastsService.showAsInformation("Loaded 1 diary day",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.diaryLogService.diaryLog()?.diaryDays?.length} diary days`,{headerText:null,delayMs:5e3})}},a.readAsText(e),this.jsonUploadDiaryInput().nativeElement.value=""}router=S(P);clearAllMemory(){localStorage.clear(),this.imageStoreService.deleteDatabase(),this.router.navigate([J.home]),setTimeout(()=>{window.location.reload()},50)}selectedDate=B(()=>this.optionsService.options().dateOfBirth);selectedDayJs=L(()=>this.selectedDate()&&j.fromNgbDateStruct(this.selectedDate()));years=L(()=>this.selectedDayJs()?j.getStartOfToday().diff(this.selectedDayJs(),"year"):0);activityLevelMap=A;activityLevels=Object.keys(te).filter(r=>!isNaN(Number(r))).map(r=>({label:A[r].description,value:+r}));weightGoalMap=R;weightGoals=Object.keys(ie).filter(r=>!isNaN(Number(r))).map(r=>({label:R[r].description,value:+r}));static \u0275fac=function(t){return new(t||n)};static \u0275cmp=U({type:n,selectors:[["app-options"]],viewQuery:function(t,e){t&1&&z(e.jsonUploadFoodsInput,ve,5)(e.jsonUploadRecipesInput,ye,5)(e.jsonUploadDiaryInput,ge,5),t&2&&G(3)},decls:106,vars:46,consts:[["jsonUploadFoods",""],["jsonUploadRecipes",""],["jsonUploadDiary",""],[1,"content-wrapper"],[1,"border","rounded","m-1","mb-0"],[1,"mx-1"],[1,"p-1","bg-body-tertiary"],[1,"d-flex","justify-content-between","align-items-center","gap-2","mx-auto",2,"width","300px"],[1,"opacity-50","text-center",2,"font-size","10px"],[1,"d-flex"],["icon","game-icons:body-height","size","32px",1,"z-0","opacity-75"],["type","number","inputmode","numeric",1,"form-control","text-center","p-0","shadow-none","border","border-0","opacity-80",2,"width","44px","border-radius","2px",3,"blur","placeholder","value"],[1,"d-flex","rounded","align-items-center",2,"border","1px solid rgba(140, 200, 240, 0.25)"],["icon","healthicons:female-24px","size","32px",1,"z-0",2,"color","rgba(240, 120, 200, 0.9)",3,"click"],[1,"bg-dark",2,"width","1px","height","34px"],["icon","healthicons:male-24px","size","32px",1,"z-0",2,"color","rgba(90, 110, 250, 0.9)",3,"click"],[1,"d-flex","justify-content-center"],["icon","ri:water-percent-line","size","32px",1,"z-0","opacity-75"],[1,"d-flex","justify-content-center","my-1"],[1,"rounded","align-content-center","text-center","bg-body-secondary","opacity-80",2,"min-width","120px"],[1,"fst-italic","text-muted","text-warning-emphasis",2,"font-size","14px"],[3,"selectedDateChange","selectedDate"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-outline-secondary","dropdown-toggle","align-self-center","py-0","mx-auto","d-block","opacity","text-truncate","text-info-emphasis","opacity-80",2,"height","34px","width","300px"],[1,"dropdown-menu","p-1",2,"width","300px"],[1,"border","p-1","bg-body-secondary","my-1","mx-auto",2,"width","300px"],[1,"text-muted","text-center","opacity-50",2,"font-size","12px"],[1,"text-center","fst-italic","text-success",2,"font-size","12px"],[1,"text-info-emphasis","text-center"],[1,"border","p-1","bg-body-secondary","mt-1","mx-auto",2,"width","300px"],[1,"text-center","fw-bold",2,"color","rgb(130, 130, 255)"],[1,"border","rounded","m-1","mb-0","mt-4"],[1,"d-flex","flex-column","gap-1","p-1","bg-body-tertiary"],["iconSize","24px","buttonIcon","iconoir:google",1,"btn","btn-secondary","p-0","px-1","rounded","opacity-75"],[1,"d-flex","justify-content-between","p-1","bg-body-tertiary"],["iconSize","24px","buttonIcon","iconoir:save-floppy-disk",1,"btn","btn-outline-secondary","p-0","px-1","rounded-0",3,"click","disabled"],["type","file","accept",".json",1,"d-none",3,"change"],["iconSize","24px","buttonIcon","iconoir:load-action-floppy",1,"btn","btn-outline-secondary","p-0","px-1","rounded-0",3,"click"],[1,"mx-1","d-flex","justify-content-between","align-items-center"],[1,"text-muted","fst-italic","opacity-75",2,"font-size","10px"],[1,"border","rounded","m-1","mb-0","bg-warning-subtle"],[1,"d-flex","flex-column","align-items-center","p-1","pt-0","bg-body-tertiary"],[1,"p-1","text-warning",2,"font-size","12px"],["iconSize","24px","buttonIcon","grommet-icons:clear",1,"btn","btn-outline-warning","p-0","px-1","opacity-25",3,"click"],[1,"text-info-emphasis",2,"font-size","14px"],[1,"fst-italic"],[1,"border","rounded",3,"mt-1"],[1,"border","rounded"],[1,"dropdown-item","cursor-pointer","text-wrap","p-1","text-center","user-select-none",3,"click"],["iconSize","24px","buttonIcon","iconoir:google",1,"btn","btn-secondary","p-0","px-1","rounded","opacity-75",3,"click"],["iconSize","24px","buttonIcon","iconoir:cloud-upload",1,"btn","p-0","px-1","rounded","opacity-40",3,"click","disabled"],["iconSize","24px","buttonIcon","iconoir:cloud-download",1,"btn","p-0","px-1","rounded","opacity-40",3,"click","disabled"],[1,"mt-4","text-muted","text-truncate","fst-italic","opacity-40",2,"font-size","14px","line-height","16px"],["iconSize","24px","buttonIcon","iconoir:log-out",1,"btn","btn-secondary","p-0","px-1","rounded","opacity-75",3,"click"]],template:function(t,e){if(t&1){let a=w();i(0,"div",3)(1,"div",4)(2,"div",5),l(3,"Anthropometrics"),o(),i(4,"div",6)(5,"div",7)(6,"div")(7,"div",8),l(8,"Height"),o(),i(9,"div",9),D(10,"iconify",10),i(11,"input",11),m("blur",function(d){return p(a),u(e.optionsService.updateHeight(d.target.value))}),o()()(),i(12,"div")(13,"div",8),l(14,"Gender"),o(),i(15,"div",12)(16,"div")(17,"iconify",13),m("click",function(){return p(a),u(e.optionsService.setIsMale(!1))}),o()(),D(18,"div",14),i(19,"div")(20,"iconify",15),m("click",function(){return p(a),u(e.optionsService.setIsMale(!0))}),o()()()(),i(21,"div")(22,"div",8),l(23,"BF %(leave empty if n/a)"),o(),i(24,"div",16),D(25,"iconify",17),i(26,"input",11),m("blur",function(d){return p(a),u(e.optionsService.updateBodyFatPercent(d.target.value))}),o()()()(),i(27,"div",18)(28,"div",19),h(29,_e,5,4)(30,fe,2,0,"span",20),o(),i(31,"date-picker",21),m("selectedDateChange",function(d){return p(a),e.selectedDate.set(d),u(e.optionsService.updateDateOfBirth(d))}),o()(),i(32,"button",22),h(33,Se,1,1)(34,xe,1,0),o(),i(35,"ul",23),k(36,be,1,1,null,null,T),o(),i(38,"div",24)(39,"div",25),l(40," Guestimation calories per day for current options "),o(),i(41,"div",26),h(42,we,1,0)(43,De,1,0),i(44,"div"),l(45,"(BMR - Rev.2023)"),o()(),i(46,"div",27),l(47),o()(),i(48,"button",22),h(49,Fe,1,1)(50,Ce,1,0),o(),i(51,"ul",23),k(52,Te,1,1,null,null,T),o(),i(54,"div",28)(55,"div",25),l(56," Guestimation calories per day for your goal "),o(),i(57,"div",29),l(58),o()()()(),i(59,"div",30)(60,"div",5),l(61,"Google Drive sync"),o(),i(62,"div",31),h(63,ke,2,0,"button",32)(64,Ie,8,13),o()(),i(65,"div",4)(66,"div",5),l(67,"Foods"),o(),i(68,"div",33)(69,"button",34),m("click",function(){return p(a),u(e.foodsService.downloadFoods())}),l(70),o(),i(71,"input",35,0),m("change",function(d){return p(a),u(e.onLoadFoodsFromFile(d))}),o(),i(73,"button",36),m("click",function(){p(a);let d=F(72);return u(d.click())}),l(74," Load "),o()()(),i(75,"div",4)(76,"div",5),l(77,"Recipes"),o(),i(78,"div",33)(79,"button",34),m("click",function(){return p(a),u(e.recipesService.downloadRecipes())}),l(80),o(),i(81,"input",35,1),m("change",function(d){return p(a),u(e.onLoadRecipesFromFile(d))}),o(),i(83,"button",36),m("click",function(){p(a);let d=F(82);return u(d.click())}),l(84," Load "),o()()(),i(85,"div",4)(86,"div",37)(87,"div"),l(88,"Main diary"),o(),i(89,"span",38),l(90,"*Images will be skipped"),o()(),i(91,"div",33)(92,"button",34),m("click",function(){return p(a),u(e.diaryLogService.downloadDiary())}),l(93),o(),i(94,"input",35,2),m("change",function(d){return p(a),u(e.onLoadDiaryFromFile(d))}),o(),i(96,"button",36),m("click",function(){p(a);let d=F(95);return u(d.click())}),l(97," Load "),o()()(),i(98,"div",39)(99,"div",5),l(100,"Storage reset"),o(),i(101,"div",40)(102,"div",41),l(103," Make sure you saved your data before clearing... "),o(),i(104,"button",42),m("click",function(){return p(a),u(e.clearAllMemory())}),l(105," Clear all memory! "),o()()()()}if(t&2){let a,s,d;c(10),g(_(30,le,e.optionsService.options().height,!e.optionsService.options().height)),c(),x("placeholder",e.optionsService.options().height?"cm":"cm?")("value",e.optionsService.options().height??null),c(5),g(V(33,se,e.optionsService.options().isMale)),c(),g(_(35,ce,!e.optionsService.options().isMale,e.optionsService.options().isMale)),c(2),g(V(38,se,!e.optionsService.options().isMale)),c(),g(_(40,ce,e.optionsService.options().isMale,!e.optionsService.options().isMale)),c(5),g(_(43,le,e.optionsService.options().bodyFatPercentage,!e.optionsService.options().bodyFatPercentage)),c(),x("placeholder",e.optionsService.options().bodyFatPercentage?"%":"?")("value",e.optionsService.options().bodyFatPercentage??null),c(3),b((a=e.selectedDayJs())?29:30,a),c(2),x("selectedDate",e.selectedDate()),c(2),b(e.optionsService.options().activityLevel??!1?33:34),c(3),I(e.activityLevels),c(6),b(e.optionsService.options().bodyFatPercentage?43:42),c(5),y(" ",e.optionsService.getCaloriesForActivityLevel(e.diaryLogService.getWeightByFormula(void 0,e.optionsService.options().weightFormulaBackDays)).toFixed()," "),c(2),b(e.optionsService.options().weightGoal??!1?49:50),c(3),I(e.weightGoals),c(6),y(" ",e.optionsService.getCaloriesForWeightGoal(e.diaryLogService.getWeightByFormula(void 0,e.optionsService.options().weightFormulaBackDays)).toFixed()," "),c(5),b(e.googleDriveService.isSignedIn()?64:63),c(6),x("disabled",!e.foodsService.foods().length),c(),y(" Save (",e.foodsService.foods().length,") "),c(9),x("disabled",!e.recipesService.recipes().length),c(),y(" Save (",e.recipesService.recipes().length,") "),c(12),x("disabled",!(!((s=e.diaryLogService.diaryLog())==null||s.diaryDays==null)&&s.diaryDays.length)),c(),y(" Save (",((d=e.diaryLogService.diaryLog())==null||d.diaryDays==null?null:d.diaryDays.length)||0,") ")}},dependencies:[K,H,ee,$],encapsulation:2})};export{pe as Options};
