import{d as k}from"./chunk-BLA4KC6D.js";import{d as O,g as $,i as A,l as W,q}from"./chunk-HRWBVKAA.js";import{a as X}from"./chunk-UB7445DR.js";import{a as H,b as w,c as J,f as Q,v as U}from"./chunk-Q55MWCOH.js";import"./chunk-2NV76B7Q.js";import{l as K,t as S}from"./chunk-LPSB5EPD.js";import{a as G}from"./chunk-XKFIHP3N.js";import{Eb as s,Fa as a,Gb as m,Qb as b,Rb as P,Sb as N,Tb as T,Ub as n,Vb as y,Wa as D,Wb as _,Xb as V,Yb as z,Zb as L,a as E,aa as p,dc as R,ec as j,fa as u,ga as g,kb as v,mb as M,mc as B,nb as C,ob as I,pb as o,qb as i,qc as x,ra as F,rb as f,xb as h}from"./chunk-DAZPDLGM.js";var Z=(d,e)=>({"text-decoration":d,"letter-spacing":e,"text-underline-offset":"2px"}),ee=d=>({"fst-italic":d});function te(d,e){if(d&1){let t=h();o(0,"li")(1,"span",18),s("click",function(){let c=u(t).$implicit,l=m();return g(l.selectedMacroCategory.set(c))}),n(2),i()()}if(d&2){let t=e.$implicit,r=m();b("background-color",r.foodMacroCategoryMap[t.value].bgColor);let c=t.label===r.selectedMacroCategory().label;a(),N(j(7,Z,c?"underline":"unset",c?"1px":"0.25px")),T(R(10,ee,c)),a(),_(" ",t.label," ")}}function oe(d,e){if(d&1){let t=h();o(0,"tr",14)(1,"td",19)(2,"button",20),s("click",function(){let c=u(t).$implicit,l=m();return g(l.deleteFood(c))}),i()(),o(3,"td",21),s("click",function(){let c=u(t).$implicit,l=m();return g(l.addFoodToDiaryOrRecipe(c))}),n(4),i(),o(5,"td",22),n(6),i(),o(7,"td",22),n(8),i(),o(9,"td",22),n(10),i(),o(11,"td",22),n(12),i(),o(13,"td",22),n(14),i(),o(15,"td",22)(16,"button",23),s("click",function(){let c=u(t).$implicit,l=m();return g(l.editFood(c))}),i()()()}if(d&2){let t=e.$implicit,r=m();a(3),b("background-color",r.foodMacroCategoryMap[t.macroCategory].bgColor),P("text-decoration-underline",!!r.diaryDate()||!!r.recipeId()),a(),_(" ",t.name," "),a(2),y(t.protein),a(2),y(t.carbs),a(2),y(t.fats),a(2),y(t.fiber),a(2),y(t.calories)}}function ie(d,e){d&1&&(o(0,"tr")(1,"td",24),n(2," No foods found in selected category... "),i()())}var Y=class d{modalService=p(q);myFoodsService=p(H);recipesService=p(X);foodMacroCategoryMap=J;macroCategories=Object.keys(w).filter(e=>!isNaN(Number(e))).map(e=>({label:w[e],value:+e}));selectedMacroCategory=F(this.macroCategories[0]);nameFilter=F("");foods=B(()=>this.myFoodsService.foods().filter(e=>e.macroCategory===this.selectedMacroCategory().value||this.selectedMacroCategory().value===0).filter(e=>e.name?.toLowerCase().includes(this.nameFilter().toLowerCase())).sort((e,t)=>e.macroCategory-t.macroCategory||e.name?.localeCompare(t.name)));diaryDate=x("");mealPosition=x(0);recipeId=x("");addFood(){this.modalService.open(k)}diaryLogService=p(U);router=p(K);addFoodToDiaryOrRecipe(e){this.diaryDate()&&this.mealPosition()?(this.diaryLogService.addFood(this.diaryDate(),+this.mealPosition(),e),this.diaryLogService.updateMealTime(this.diaryDate(),this.mealPosition()),this.router.navigate([S.diary],{queryParams:{diaryDate:this.diaryDate()}})):this.recipeId()&&(this.recipesService.addFood(this.recipeId(),e.id),this.router.navigate([S.recipes]))}editFood(e){this.modalService.open(k).componentInstance.food.set(E({barcode:null},e))}deleteFood(e){this.myFoodsService.deleteFood(e)}static \u0275fac=function(t){return new(t||d)};static \u0275cmp=D({type:d,selectors:[["ng-component"]],inputs:{diaryDate:[1,"diaryDate"],mealPosition:[1,"mealPosition"],recipeId:[1,"recipeId"]},decls:35,vars:6,consts:[[1,"content-wrapper","d-flex","justify-content-between","gap-2","p-1","bg-body-tertiary","border-bottom"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-secondary","dropdown-toggle","bmw","align-self-center","p-1"],[1,"dropdown-menu","p-0","overflow-hidden","shadow-sm",2,"min-width","120px"],[3,"background-color"],[1,"position-relative"],["type","text","placeholder","Filter by name",1,"form-control","p-1",3,"ngModelChange","ngModel"],["buttonIcon","mdi:close",1,"btn","btn-sm","btn-secondary","p-0","position-absolute","end-0","top-50","translate-middle-y","me-2","z-1",3,"click","iconSize"],[1,"content-wrapper","overflow-y-auto",2,"height","calc(100dvh - 141px)"],[1,"table","table-sm","table-striped","table-hover","mb-0",2,"font-size","10px","table-layout","fixed"],[1,"position-sticky","z-1",2,"top","0px"],["scope","col",1,"bg-gradient",2,"width","8%"],["scope","col",1,"bg-gradient",2,"width","28%"],["scope","col",1,"text-center","bg-gradient",2,"width","10%"],["scope","col",1,"text-center","bg-gradient",2,"width","15%"],["scope","row",1,""],[1,"btn","btn-outline-success","p-2","rounded-top-0","w-100","d-flex","justify-content-between","mt-auto","opacity-85",3,"click"],["icon","iconoir:lens-plus"],["icon","mdi:plus"],[1,"dropdown-item","cursor-pointer","px-2",3,"click"],[1,"text-truncate","text-center"],["iconSize","16px","buttonIcon","iconoir:trash",1,"btn","p-0","btn-warning","opacity-25","m-auto",3,"click"],[1,"py-2",2,"font-size","12px","text-underline-offset","2px",3,"click"],[1,"text-truncate","text-center","p-0"],["iconSize","24px","buttonIcon","iconoir:edit",1,"btn","p-0","rounded","btn-secondary","m-auto","opacity-75",3,"click"],["colspan","8",1,"fst-italic","text-center","bg-body-tertiary","text-muted"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"button",1),n(2),i(),o(3,"ul",2),M(4,te,3,12,"li",3,v),i(),o(6,"div",4)(7,"input",5),L("ngModelChange",function(l){return z(r.nameFilter,l)||(r.nameFilter=l),l}),i(),o(8,"button",6),s("click",function(){return r.nameFilter.set("")}),i()()(),o(9,"div",7)(10,"table",8)(11,"thead",9)(12,"tr"),f(13,"th",10),o(14,"th",11),n(15,"Name"),i(),o(16,"th",12),n(17,"Prot"),i(),o(18,"th",12),n(19,"Carbs"),i(),o(20,"th",12),n(21,"Fats"),i(),o(22,"th",12),n(23,"Fiber"),i(),o(24,"th",13),n(25,"KCal"),i(),f(26,"th",10),i()(),o(27,"tbody"),M(28,oe,17,10,"tr",14,v,!1,ie,3,0,"tr"),i()()(),o(31,"button",15),s("click",function(){return r.addFood()}),f(32,"iconify",16),n(33," Add a food "),f(34,"iconify",17),i()),t&2&&(a(),b("background-color",r.foodMacroCategoryMap[r.selectedMacroCategory().value].bgColor),a(),_(" ",r.selectedMacroCategory().label," "),a(2),C(r.macroCategories),a(3),V("ngModel",r.nameFilter),a(),I("iconSize","16px"),a(20),C(r.foods()))},dependencies:[Q,W,O,$,A,G],styles:['thead[_ngcontent-%COMP%]:after{content:"";display:block;height:2px;background-color:#aaa;width:100%;position:absolute;bottom:0;left:0}']})};export{Y as MyFoods};
