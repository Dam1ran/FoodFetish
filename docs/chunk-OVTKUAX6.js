import{a as ae,b as le}from"./chunk-X5CIYW3V.js";import{a as ie,b as A,c as ne,d as R,e as oe}from"./chunk-KUOMSHLI.js";import{a as te}from"./chunk-WQBYX4JC.js";import{a as T,b as re}from"./chunk-ET3JPIE6.js";import{a as X}from"./chunk-3OJFEKT3.js";import{A as K,M as Y,P as Z,Q as ee,w as Q}from"./chunk-PXXMBKHJ.js";import{f as P,l as J,t as H}from"./chunk-MAWMYTZY.js";import{a as q}from"./chunk-TTUD5ZDE.js";import{Fb as m,Ga as c,Hb as v,Ob as G,Pb as W,Qb as F,Sb as L,Tb as V,Ub as y,Vb as l,Xa as z,Xb as g,aa as x,ec as j,fa as p,fc as _,ga as u,ic as N,jb as h,jc as B,kb as b,lb as I,nb as O,nc as C,ob as M,oc as $,pb as S,qb as t,rb as o,sb as D,sc as E,yb as w}from"./chunk-HXGKTDM5.js";var ve=["jsonUploadFoods"],ge=["jsonUploadRecipes"],ye=["jsonUploadDiary"],U=(n,a)=>({"text-info-emphasis":n,"text-warning-emphasis":a}),se=n=>({"bg-body":n}),ce=(n,a)=>({"opacity-90":n,"opacity-10":a}),ue=(n,a)=>({"text-decoration":n,"letter-spacing":a,"text-underline-offset":"2px"}),me=(n,a)=>({"fst-italic":n,"bg-body-tertiary":a}),de=(n,a)=>({"btn-secondary":n,"btn-outline-secondary":a});function _e(n,a){if(n&1&&(t(0,"span",46),l(1),N(2,"date"),o(),t(3,"span",47),l(4),o()),n&2){let i=v();c(),g(" ",B(2,2,a.toISOString())," "),c(3),g("(",i.years(),")")}}function fe(n,a){n&1&&(t(0,"span",23),l(1," Date of birth "),o())}function Se(n,a){if(n&1&&l(0),n&2){let i=v();g(" ",i.activityLevelMap[i.optionsService.options().activityLevel].description," ")}}function xe(n,a){n&1&&l(0," Choose activity level ")}function he(n,a){if(n&1){let i=w();t(0,"li",49)(1,"span",50),m("click",function(){p(i);let r=v().$implicit,s=v();return u(s.optionsService.setActivityLevel(r.value))}),l(2),o()()}if(n&2){let i=v(),e=i.$implicit,r=i.$index;L("mt-1",r!==0);let s=e.value===v().optionsService.options().activityLevel;c(),V(_(7,ue,s?"underline":"unset",s?"1px":"0.25px")),y(_(10,me,s,r%2===0)),c(),g(" ",e.label," ")}}function be(n,a){if(n&1&&h(0,he,3,13,"li",48),n&2){let i=a.$implicit;b(i.value!==0?0:-1)}}function we(n,a){n&1&&l(0," Revised Harris-Benedict equation ")}function De(n,a){n&1&&l(0," Katch-McArdle equation ")}function Fe(n,a){if(n&1&&l(0),n&2){let i=v();g(" ",i.weightGoalMap[i.optionsService.options().weightGoal].description," ")}}function Ce(n,a){n&1&&l(0," Choose your weight goal ")}function Ee(n,a){if(n&1){let i=w();t(0,"li",49)(1,"span",50),m("click",function(){p(i);let r=v().$implicit,s=v();return u(s.optionsService.setWeightGoal(r.value))}),l(2),o()()}if(n&2){let i=v(),e=i.$implicit,r=i.$index;L("mt-1",r!==0);let s=e.value===v().optionsService.options().weightGoal;c(),V(_(7,ue,s?"underline":"unset",s?"1px":"0.25px")),y(_(10,me,s,r%2===0)),c(),g(" ",e.label," ")}}function Te(n,a){if(n&1&&h(0,Ee,3,13,"li",48),n&2){let i=a.$implicit;b(i.value!==0?0:-1)}}function ke(n,a){if(n&1){let i=w();t(0,"button",51),m("click",function(){p(i);let r=v();return u(r.googleDriveService.signIn())}),l(1," Sign in with Google "),o()}}function Ie(n,a){if(n&1){let i=w();t(0,"button",52),m("click",function(){p(i);let r=v();return u(r.googleDriveService.uploadToDrive())}),l(1," Upload to Drive "),o(),t(2,"button",53),m("click",function(){p(i);let r=v();return u(r.googleDriveService.downloadFromDrive())}),l(3," Download from Drive "),o(),t(4,"div",54),l(5),o(),t(6,"button",55),m("click",function(){p(i);let r=v();return u(r.googleDriveService.signOut())}),l(7," Sign out "),o()}if(n&2){let i=v();y(_(7,de,!i.googleDriveService.isSyncing(),i.googleDriveService.isSyncing())),S("disabled",i.googleDriveService.isSyncing()),c(2),y(_(10,de,!i.googleDriveService.isSyncing(),i.googleDriveService.isSyncing())),S("disabled",i.googleDriveService.isSyncing()),c(3),g(" ",i.googleDriveService.userEmail()," ")}}var pe=class n{toastsService=x(ae);foodsService=x(Q);recipesService=x(ee);diaryLogService=x(Z);imageStoreService=x(re);googleDriveService=x(le);optionsService=x(oe);today=C(()=>T.getStartOfToday());jsonUploadFoodsInput=E("jsonUploadFoods");onLoadFoodsFromFile(a){let i=a.target;if(i.files?.length!==1){this.jsonUploadFoodsInput().nativeElement.value="";return}let e=i.files?.[0],r=new FileReader;r.onload=s=>{let d=s.target?.result;if(d){let f=JSON.parse(d);if(!Array.isArray(f)||!f.every(k=>K(k))){this.toastsService.showAsWarning("Wrong food data",{headerText:null,delayMs:5e3}),console.warn("Wrong food data");return}if(this.foodsService.setFoods(f),this.foodsService.foods()?.length===1){this.toastsService.showAsInformation("Loaded 1 food",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.foodsService.foods()?.length} foods`,{headerText:null,delayMs:5e3})}},r.readAsText(e),this.jsonUploadFoodsInput().nativeElement.value=""}jsonUploadRecipesInput=E("jsonUploadRecipes");onLoadRecipesFromFile(a){let i=a.target;if(i.files?.length!==1){this.jsonUploadRecipesInput().nativeElement.value="";return}let e=i.files?.[0],r=new FileReader;r.onload=s=>{let d=s.target?.result;if(d){let f=JSON.parse(d);if(!Array.isArray(f)||!f.every(k=>Y(k))){this.toastsService.showAsWarning("Wrong recipes data",{headerText:null,delayMs:5e3}),console.warn("Wrong recipes data");return}if(this.recipesService.setRecipes(f),this.recipesService.recipes()?.length===1){this.toastsService.showAsInformation("Loaded 1 recipe",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.recipesService.recipes()?.length} recipes`,{headerText:null,delayMs:5e3})}},r.readAsText(e),this.jsonUploadRecipesInput().nativeElement.value=""}jsonUploadDiaryInput=E("jsonUploadDiary");onLoadDiaryFromFile(a){let i=a.target;if(i.files?.length!==1){this.jsonUploadDiaryInput().nativeElement.value="";return}let e=i.files?.[0],r=new FileReader;r.onload=s=>{let d=s.target?.result;if(d){let f=JSON.parse(d);if(!Array.isArray(f.diaryDays)){this.toastsService.showAsWarning("Wrong diary data",{headerText:null,delayMs:5e3}),console.warn("Wrong diary data");return}if(this.diaryLogService.setDiary(f),this.diaryLogService.diaryLog()?.diaryDays?.length===1){this.toastsService.showAsInformation("Loaded 1 diary day",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.diaryLogService.diaryLog()?.diaryDays?.length} diary days`,{headerText:null,delayMs:5e3})}},r.readAsText(e),this.jsonUploadDiaryInput().nativeElement.value=""}router=x(J);clearAllMemory(){localStorage.clear(),this.imageStoreService.deleteDatabase(),this.router.navigate([H.home]),setTimeout(()=>{window.location.reload()},50)}selectedDate=$(()=>this.optionsService.options().dateOfBirth);selectedDayJs=C(()=>this.selectedDate()&&T.fromNgbDateStruct(this.selectedDate()));years=C(()=>this.selectedDayJs()?T.getStartOfToday().diff(this.selectedDayJs(),"year"):0);activityLevelMap=A;activityLevels=Object.keys(ie).filter(a=>!isNaN(Number(a))).map(a=>({label:A[a].description,value:+a}));weightGoalMap=R;weightGoals=Object.keys(ne).filter(a=>!isNaN(Number(a))).map(a=>({label:R[a].description,value:+a}));static \u0275fac=function(i){return new(i||n)};static \u0275cmp=z({type:n,selectors:[["app-options"]],viewQuery:function(i,e){i&1&&G(e.jsonUploadFoodsInput,ve,5)(e.jsonUploadRecipesInput,ge,5)(e.jsonUploadDiaryInput,ye,5),i&2&&W(3)},decls:113,vars:53,consts:[["jsonUploadFoods",""],["jsonUploadRecipes",""],["jsonUploadDiary",""],[1,"content-wrapper"],[1,"border","rounded","m-1","mb-0"],[1,"mx-1"],[1,"p-1","bg-body-tertiary"],[1,"d-flex","justify-content-between","align-items-center","gap-2","mx-auto",2,"width","300px"],[1,"opacity-50","text-center",2,"font-size","10px"],[1,"d-flex"],["icon","game-icons:body-height","size","32px",1,"z-0","opacity-75"],["type","number","inputmode","numeric",1,"form-control","text-center","p-0","shadow-none","border","border-0","opacity-80",2,"width","44px","border-radius","2px",3,"blur","placeholder","value"],[1,"d-flex","rounded","align-items-center",2,"border","1px solid rgba(140, 200, 240, 0.25)"],["icon","healthicons:female-24px","size","32px",1,"z-0",2,"color","rgba(240, 120, 200, 0.9)",3,"click"],[1,"bg-dark",2,"width","1px","height","34px"],["icon","healthicons:male-24px","size","32px",1,"z-0",2,"color","rgba(90, 110, 250, 0.9)",3,"click"],[1,"d-flex","justify-content-center"],["icon","ri:water-percent-line","size","32px",1,"z-0","opacity-75"],[1,"d-flex","justify-content-between","align-items-end"],[1,"d-flex","mb-1"],["icon","iconoir:weight","size","32px",1,"z-0","opacity-75"],[1,"d-flex","justify-content-center","my-1","align-itesms-center"],[1,"rounded","align-content-center","text-center","bg-body-secondary","opacity-80",2,"min-width","120px"],[1,"fst-italic","text-muted","text-warning-emphasis",2,"font-size","14px"],[3,"selectedDateChange","selectedDate"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-outline-secondary","dropdown-toggle","align-self-center","py-0","mx-auto","d-block","opacity","text-truncate","text-info-emphasis","opacity-80",2,"height","34px","width","300px"],[1,"dropdown-menu","p-1",2,"width","300px"],[1,"border","p-1","bg-body-secondary","my-1","mx-auto",2,"width","300px"],[1,"text-muted","text-center","opacity-50",2,"font-size","12px"],[1,"text-center","fst-italic","text-success",2,"font-size","12px"],[1,"text-info-emphasis","text-center"],[1,"border","p-1","bg-body-secondary","mt-1","mx-auto",2,"width","300px"],[1,"text-center","fw-bold",2,"color","rgb(130, 130, 255)"],[1,"border","rounded","m-1","mb-0","mt-4"],[1,"d-flex","flex-column","gap-1","p-1","bg-body-tertiary"],["iconSize","24px","buttonIcon","iconoir:google",1,"btn","btn-secondary","p-0","px-1","rounded","opacity-75"],[1,"d-flex","justify-content-between","p-1","bg-body-tertiary"],["iconSize","24px","buttonIcon","iconoir:save-floppy-disk",1,"btn","btn-outline-secondary","p-0","px-1","rounded-0",3,"click","disabled"],["type","file","accept",".json",1,"d-none",3,"change"],["iconSize","24px","buttonIcon","iconoir:load-action-floppy",1,"btn","btn-outline-secondary","p-0","px-1","rounded-0",3,"click"],[1,"mx-1","d-flex","justify-content-between","align-items-center"],[1,"text-muted","fst-italic","opacity-75",2,"font-size","10px"],[1,"border","rounded","m-1","mb-0","bg-warning-subtle"],[1,"d-flex","flex-column","align-items-center","p-1","pt-0","bg-body-tertiary"],[1,"p-1","text-warning",2,"font-size","12px"],["iconSize","24px","buttonIcon","grommet-icons:clear",1,"btn","btn-outline-warning","p-0","px-1","opacity-25",3,"click"],[1,"text-info-emphasis",2,"font-size","14px"],[1,"fst-italic"],[1,"border","rounded",3,"mt-1"],[1,"border","rounded"],[1,"dropdown-item","cursor-pointer","text-wrap","p-1","text-center","user-select-none",3,"click"],["iconSize","24px","buttonIcon","iconoir:google",1,"btn","btn-secondary","p-0","px-1","rounded","opacity-75",3,"click"],["iconSize","24px","buttonIcon","iconoir:cloud-upload",1,"btn","p-0","px-1","rounded","opacity-40",3,"click","disabled"],["iconSize","24px","buttonIcon","iconoir:cloud-download",1,"btn","p-0","px-1","rounded","opacity-40",3,"click","disabled"],[1,"mt-4","text-muted","text-truncate","fst-italic","opacity-40",2,"font-size","14px","line-height","16px"],["iconSize","24px","buttonIcon","iconoir:log-out",1,"btn","btn-secondary","p-0","px-1","rounded","opacity-75",3,"click"]],template:function(i,e){if(i&1){let r=w();t(0,"div",3)(1,"div",4)(2,"div",5),l(3,"Anthropometrics"),o(),t(4,"div",6)(5,"div",7)(6,"div")(7,"div",8),l(8,"Height"),o(),t(9,"div",9),D(10,"iconify",10),t(11,"input",11),m("blur",function(d){return p(r),u(e.optionsService.updateHeight(d.target.value))}),o()()(),t(12,"div")(13,"div",8),l(14,"Gender"),o(),t(15,"div",12)(16,"div")(17,"iconify",13),m("click",function(){return p(r),u(e.optionsService.setIsMale(!1))}),o()(),D(18,"div",14),t(19,"div")(20,"iconify",15),m("click",function(){return p(r),u(e.optionsService.setIsMale(!0))}),o()()()(),t(21,"div")(22,"div",8),l(23,"BF %(leave empty if n/a)"),o(),t(24,"div",16),D(25,"iconify",17),t(26,"input",11),m("blur",function(d){return p(r),u(e.optionsService.updateBodyFatPercent(d.target.value))}),o()()()(),t(27,"div",18)(28,"div")(29,"div",8),l(30,"Weight"),o(),t(31,"div",19),D(32,"iconify",20),t(33,"input",11),m("blur",function(d){return p(r),u(e.diaryLogService.updateCurrentWeight(e.today().toISOString(),d.target.value))}),o()()(),t(34,"div",21)(35,"div",22),h(36,_e,5,4)(37,fe,2,0,"span",23),o(),t(38,"date-picker",24),m("selectedDateChange",function(d){return p(r),e.selectedDate.set(d),u(e.optionsService.updateDateOfBirth(d))}),o()()(),t(39,"button",25),h(40,Se,1,1)(41,xe,1,0),o(),t(42,"ul",26),O(43,be,1,1,null,null,I),o(),t(45,"div",27)(46,"div",28),l(47," Guestimation calories per day for current options "),o(),t(48,"div",29),h(49,we,1,0)(50,De,1,0),t(51,"div"),l(52,"(BMR - Rev.2023)"),o()(),t(53,"div",30),l(54),o()(),t(55,"button",25),h(56,Fe,1,1)(57,Ce,1,0),o(),t(58,"ul",26),O(59,Te,1,1,null,null,I),o(),t(61,"div",31)(62,"div",28),l(63," Guestimation calories per day for your goal "),o(),t(64,"div",32),l(65),o()()()(),t(66,"div",33)(67,"div",5),l(68,"Google Drive sync"),o(),t(69,"div",34),h(70,ke,2,0,"button",35)(71,Ie,8,13),o()(),t(72,"div",4)(73,"div",5),l(74,"Foods"),o(),t(75,"div",36)(76,"button",37),m("click",function(){return p(r),u(e.foodsService.downloadFoods())}),l(77),o(),t(78,"input",38,0),m("change",function(d){return p(r),u(e.onLoadFoodsFromFile(d))}),o(),t(80,"button",39),m("click",function(){p(r);let d=F(79);return u(d.click())}),l(81," Load "),o()()(),t(82,"div",4)(83,"div",5),l(84,"Recipes"),o(),t(85,"div",36)(86,"button",37),m("click",function(){return p(r),u(e.recipesService.downloadRecipes())}),l(87),o(),t(88,"input",38,1),m("change",function(d){return p(r),u(e.onLoadRecipesFromFile(d))}),o(),t(90,"button",39),m("click",function(){p(r);let d=F(89);return u(d.click())}),l(91," Load "),o()()(),t(92,"div",4)(93,"div",40)(94,"div"),l(95,"Main diary"),o(),t(96,"span",41),l(97,"*Images will be skipped"),o()(),t(98,"div",36)(99,"button",37),m("click",function(){return p(r),u(e.diaryLogService.downloadDiary())}),l(100),o(),t(101,"input",38,2),m("change",function(d){return p(r),u(e.onLoadDiaryFromFile(d))}),o(),t(103,"button",39),m("click",function(){p(r);let d=F(102);return u(d.click())}),l(104," Load "),o()()(),t(105,"div",42)(106,"div",5),l(107,"Storage reset"),o(),t(108,"div",43)(109,"div",44),l(110," Make sure you saved your data before clearing... "),o(),t(111,"button",45),m("click",function(){return p(r),u(e.clearAllMemory())}),l(112," Clear all memory! "),o()()()()}if(i&2){let r,s,d;c(10),y(_(34,U,e.optionsService.options().height,!e.optionsService.options().height)),c(),S("placeholder",e.optionsService.options().height?"cm":"cm?")("value",e.optionsService.options().height??null),c(5),y(j(37,se,e.optionsService.options().isMale)),c(),y(_(39,ce,!e.optionsService.options().isMale,e.optionsService.options().isMale)),c(2),y(j(42,se,!e.optionsService.options().isMale)),c(),y(_(44,ce,e.optionsService.options().isMale,!e.optionsService.options().isMale)),c(5),y(_(47,U,e.optionsService.options().bodyFatPercentage,!e.optionsService.options().bodyFatPercentage)),c(),S("placeholder",e.optionsService.options().bodyFatPercentage?"%":"?")("value",e.optionsService.options().bodyFatPercentage??null),c(6),y(_(50,U,e.optionsService.options().height,!e.optionsService.options().height)),c(),S("placeholder",e.diaryLogService.getCurrentWeight(e.today().toISOString())?"kg":"?")("value",e.diaryLogService.getCurrentWeight(e.today().toISOString())??null),c(3),b((r=e.selectedDayJs())?36:37,r),c(2),S("selectedDate",e.selectedDate()),c(2),b(e.optionsService.options().activityLevel??!1?40:41),c(3),M(e.activityLevels),c(6),b(e.optionsService.options().bodyFatPercentage?50:49),c(5),g(" ",e.optionsService.getCaloriesForActivityLevel(e.diaryLogService.getWeightByFormula(void 0,e.optionsService.options().weightFormulaBackDays)).toFixed()," "),c(2),b(e.optionsService.options().weightGoal??!1?56:57),c(3),M(e.weightGoals),c(6),g(" ",e.optionsService.getCaloriesForWeightGoal(e.diaryLogService.getWeightByFormula(void 0,e.optionsService.options().weightFormulaBackDays)).toFixed()," "),c(5),b(e.googleDriveService.isSignedIn()?71:70),c(6),S("disabled",!e.foodsService.foods().length),c(),g(" Save (",e.foodsService.foods().length,") "),c(9),S("disabled",!e.recipesService.recipes().length),c(),g(" Save (",e.recipesService.recipes().length,") "),c(12),S("disabled",!(!((s=e.diaryLogService.diaryLog())==null||s.diaryDays==null)&&s.diaryDays.length)),c(),g(" Save (",((d=e.diaryLogService.diaryLog())==null||d.diaryDays==null?null:d.diaryDays.length)||0,") ")}},dependencies:[X,q,te,P],encapsulation:2})};export{pe as Options};
