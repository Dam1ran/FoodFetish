import{a as V}from"./chunk-FVGU5N2M.js";import{a as k}from"./chunk-2KTHP7SW.js";import{a as x,e as T,f as L,r as E,u as U,v as R}from"./chunk-KHSIFIAT.js";import"./chunk-P7OX43DN.js";import{l as F,t as j}from"./chunk-ZO3AIT2L.js";import"./chunk-TTUD5ZDE.js";import{Fb as c,Ga as y,Ob as I,Pb as D,Qb as v,Vb as s,Xa as w,Xb as g,aa as m,fa as l,ga as d,pb as f,qb as o,rb as r,sc as h,yb as b}from"./chunk-HXGKTDM5.js";var M=["jsonUploadFoods"],O=["jsonUploadRecipes"],W=["jsonUploadDiary"],A=class _{toastsService=m(V);foodsService=m(x);recipesService=m(R);diaryLogService=m(U);imageStoreService=m(k);jsonUploadFoodsInput=h("jsonUploadFoods");onLoadFoodsFromFile(u){let a=u.target;if(a.files?.length!==1){this.jsonUploadFoodsInput().nativeElement.value="";return}let e=a.files?.[0],t=new FileReader;t.onload=n=>{let i=n.target?.result;if(i){let p=JSON.parse(i);if(!Array.isArray(p)||!p.every(S=>T(S))){this.toastsService.showAsWarning("Wrong food data",{headerText:null,delayMs:5e3}),console.warn("Wrong food data");return}if(this.foodsService.setFoods(p),this.foodsService.foods()?.length===1){this.toastsService.showAsInformation("Loaded 1 food",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.foodsService.foods()?.length} foods`,{headerText:null,delayMs:5e3})}},t.readAsText(e),this.jsonUploadFoodsInput().nativeElement.value=""}jsonUploadRecipesInput=h("jsonUploadRecipes");onLoadRecipesFromFile(u){let a=u.target;if(a.files?.length!==1){this.jsonUploadRecipesInput().nativeElement.value="";return}let e=a.files?.[0],t=new FileReader;t.onload=n=>{let i=n.target?.result;if(i){let p=JSON.parse(i);if(!Array.isArray(p)||!p.every(S=>E(S))){this.toastsService.showAsWarning("Wrong recipes data",{headerText:null,delayMs:5e3}),console.warn("Wrong recipes data");return}if(this.recipesService.setRecipes(p),this.recipesService.recipes()?.length===1){this.toastsService.showAsInformation("Loaded 1 recipe",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.recipesService.recipes()?.length} recipes`,{headerText:null,delayMs:5e3})}},t.readAsText(e),this.jsonUploadRecipesInput().nativeElement.value=""}jsonUploadDiaryInput=h("jsonUploadDiary");onLoadDiaryFromFile(u){let a=u.target;if(a.files?.length!==1){this.jsonUploadDiaryInput().nativeElement.value="";return}let e=a.files?.[0],t=new FileReader;t.onload=n=>{let i=n.target?.result;if(i){let p=JSON.parse(i);if(!Array.isArray(p.diaryDays)){this.toastsService.showAsWarning("Wrong diary data",{headerText:null,delayMs:5e3}),console.warn("Wrong diary data");return}if(this.diaryLogService.setDiary(p),this.diaryLogService.diaryLog()?.diaryDays?.length===1){this.toastsService.showAsInformation("Loaded 1 diary day",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.diaryLogService.diaryLog()?.diaryDays?.length} diary days`,{headerText:null,delayMs:5e3})}},t.readAsText(e),this.jsonUploadDiaryInput().nativeElement.value=""}router=m(F);clearAllMemory(){localStorage.clear(),this.imageStoreService.deleteDatabase(),this.router.navigate([j.home]),setTimeout(()=>{window.location.reload()},50)}static \u0275fac=function(a){return new(a||_)};static \u0275cmp=w({type:_,selectors:[["app-options"]],viewQuery:function(a,e){a&1&&I(e.jsonUploadFoodsInput,M,5)(e.jsonUploadRecipesInput,O,5)(e.jsonUploadDiaryInput,W,5),a&2&&D(3)},decls:42,vars:6,consts:[["jsonUploadFoods",""],["jsonUploadRecipes",""],["jsonUploadDiary",""],[1,"content-wrapper"],[1,"border","rounded","m-1","mb-0"],[1,"mx-1"],[1,"d-flex","justify-content-between","p-1","bg-body-tertiary"],["iconSize","24px","buttonIcon","iconoir:save-floppy-disk",1,"btn","btn-outline-secondary","p-0","px-1","rounded-0",3,"click","disabled"],["type","file","accept",".json",1,"d-none",3,"change"],["iconSize","24px","buttonIcon","iconoir:load-action-floppy",1,"btn","btn-outline-secondary","p-0","px-1","rounded-0",3,"click"],[1,"mx-1","d-flex","justify-content-between","align-items-center"],[1,"text-muted","fst-italic","opacity-75",2,"font-size","10px"],[1,"border","rounded","m-1","mb-0","bg-warning-subtle"],[1,"d-flex","flex-column","align-items-center","p-1","pt-0","bg-body-tertiary"],[1,"p-1","text-warning",2,"font-size","12px"],["iconSize","24px","buttonIcon","grommet-icons:clear",1,"btn","btn-outline-warning","p-0","px-1","opacity-25",3,"click"]],template:function(a,e){if(a&1){let t=b();o(0,"div",3)(1,"div",4)(2,"div",5),s(3,"Foods"),r(),o(4,"div",6)(5,"button",7),c("click",function(){return l(t),d(e.foodsService.downloadFoods())}),s(6),r(),o(7,"input",8,0),c("change",function(i){return l(t),d(e.onLoadFoodsFromFile(i))}),r(),o(9,"button",9),c("click",function(){l(t);let i=v(8);return d(i.click())}),s(10," Load "),r()()(),o(11,"div",4)(12,"div",5),s(13,"Recipes"),r(),o(14,"div",6)(15,"button",7),c("click",function(){return l(t),d(e.recipesService.downloadRecipes())}),s(16),r(),o(17,"input",8,1),c("change",function(i){return l(t),d(e.onLoadRecipesFromFile(i))}),r(),o(19,"button",9),c("click",function(){l(t);let i=v(18);return d(i.click())}),s(20," Load "),r()()(),o(21,"div",4)(22,"div",10)(23,"div"),s(24,"Main diary"),r(),o(25,"span",11),s(26,"*Images will be skipped"),r()(),o(27,"div",6)(28,"button",7),c("click",function(){return l(t),d(e.diaryLogService.downloadDiary())}),s(29),r(),o(30,"input",8,2),c("change",function(i){return l(t),d(e.onLoadDiaryFromFile(i))}),r(),o(32,"button",9),c("click",function(){l(t);let i=v(31);return d(i.click())}),s(33," Load "),r()()(),o(34,"div",12)(35,"div",5),s(36,"Storage reset"),r(),o(37,"div",13)(38,"div",14),s(39," Make sure you saved your data before clearing... "),r(),o(40,"button",15),c("click",function(){return l(t),d(e.clearAllMemory())}),s(41," Clear all memory! "),r()()()()}if(a&2){let t,n;y(5),f("disabled",!e.foodsService.foods().length),y(),g(" Save (",e.foodsService.foods().length,") "),y(9),f("disabled",!e.recipesService.recipes().length),y(),g(" Save (",e.recipesService.recipes().length,") "),y(12),f("disabled",!(!((t=e.diaryLogService.diaryLog())==null||t.diaryDays==null)&&t.diaryDays.length)),y(),g(" Save (",((n=e.diaryLogService.diaryLog())==null||n.diaryDays==null?null:n.diaryDays.length)||0,") ")}},dependencies:[L],encapsulation:2})};export{A as Options};
