import{d as k}from"./chunk-7VHOWGYG.js";import{f as Q}from"./chunk-7JPVJEPI.js";import{e as B,h as O,j as $,m as A,r as W}from"./chunk-SA47XSDJ.js";import{a as U}from"./chunk-IOZT6XD7.js";import{a as K,b as G,c as w,d as H,g as J}from"./chunk-ULHKVDUS.js";import"./chunk-7QS2YA2B.js";import{l as q,t as S}from"./chunk-V66RXVYC.js";import{Eb as s,Fa as a,Gb as m,Qb as b,Rb as I,Sb as P,Tb as N,Ub as n,Vb as y,Wa as E,Wb as _,Xb as T,Yb as V,Zb as z,aa as p,dc as L,ec as R,fa as u,ga as g,kb as v,mb as M,mc as j,nb as C,ob as D,pb as o,qb as i,qc as x,ra as F,rb as f,xb as h}from"./chunk-IEPN4JXQ.js";var Y=(d,e)=>({"text-decoration":d,"letter-spacing":e,"text-underline-offset":"2px"}),Z=d=>({"fst-italic":d});function ee(d,e){if(d&1){let t=h();o(0,"li")(1,"span",18),s("click",function(){let c=u(t).$implicit,l=m();return g(l.selectedMacroCategory.set(c))}),n(2),i()()}if(d&2){let t=e.$implicit,r=m();b("background-color",r.foodMacroCategoryMap[t.value].bgColor);let c=t.label===r.selectedMacroCategory().label;a(),P(R(7,Y,c?"underline":"unset",c?"1px":"0.25px")),N(L(10,Z,c)),a(),_(" ",t.label," ")}}function te(d,e){if(d&1){let t=h();o(0,"tr",14)(1,"td",19)(2,"button",20),s("click",function(){let c=u(t).$implicit,l=m();return g(l.deleteFood(c))}),i()(),o(3,"td",21),s("click",function(){let c=u(t).$implicit,l=m();return g(l.addFoodToDiaryOrRecipe(c))}),n(4),i(),o(5,"td",22),n(6),i(),o(7,"td",22),n(8),i(),o(9,"td",22),n(10),i(),o(11,"td",22),n(12),i(),o(13,"td",22),n(14),i(),o(15,"td",22)(16,"button",23),s("click",function(){let c=u(t).$implicit,l=m();return g(l.editFood(c))}),i()()()}if(d&2){let t=e.$implicit,r=m();a(3),b("background-color",r.foodMacroCategoryMap[t.macroCategory].bgColor),I("cursor-pointer",r.diaryDate()),a(),_(" ",t.name," "),a(2),y(t.protein),a(2),y(t.carbs),a(2),y(t.fats),a(2),y(t.fiber),a(2),y(t.calories)}}function oe(d,e){d&1&&(o(0,"tr")(1,"td",24),n(2," No foods found in selected category... "),i()())}var X=class d{modalService=p(W);myFoodsService=p(G);recipesService=p(U);foodMacroCategoryMap=H;macroCategories=Object.keys(w).filter(e=>!isNaN(Number(e))).map(e=>({label:w[e],value:+e}));selectedMacroCategory=F(this.macroCategories[0]);nameFilter=F("");foods=j(()=>this.myFoodsService.foods().filter(e=>e.macroCategory===this.selectedMacroCategory().value||this.selectedMacroCategory().value===0).filter(e=>e.name?.toLowerCase().includes(this.nameFilter().toLowerCase())).sort((e,t)=>e.macroCategory-t.macroCategory||e.name?.localeCompare(t.name)));diaryDate=x("");mealPosition=x(0);recipeId=x("");addFood(){this.modalService.open(k)}diaryLogService=p(Q);router=p(q);addFoodToDiaryOrRecipe(e){this.diaryDate()&&this.mealPosition()?(this.diaryLogService.addFood(this.diaryDate(),this.mealPosition(),e),this.router.navigate([S.diary],{queryParams:{diaryDate:this.diaryDate()}})):this.recipeId()&&(this.recipesService.addFood(this.recipeId(),e.id),this.router.navigate([S.recipes]))}editFood(e){this.modalService.open(k).componentInstance.food.set(e)}deleteFood(e){this.myFoodsService.deleteFood(e)}static \u0275fac=function(t){return new(t||d)};static \u0275cmp=E({type:d,selectors:[["ng-component"]],inputs:{diaryDate:[1,"diaryDate"],mealPosition:[1,"mealPosition"],recipeId:[1,"recipeId"]},decls:35,vars:6,consts:[[1,"content-wrapper","d-flex","justify-content-between","gap-2","p-1","bg-body-tertiary","border-bottom"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-secondary","dropdown-toggle","bmw","align-self-center","p-1"],[1,"dropdown-menu","p-0","overflow-hidden","shadow-sm",2,"min-width","120px"],[3,"background-color"],[1,"position-relative"],["type","text","placeholder","Filter by name",1,"form-control","p-1",3,"ngModelChange","ngModel"],["buttonIcon","mdi:close",1,"btn","btn-sm","btn-secondary","p-0","position-absolute","end-0","top-50","translate-middle-y","me-2","z-1",3,"click","iconSize"],[1,"content-wrapper","overflow-y-auto",2,"height","calc(100dvh - 137px)"],[1,"table","table-sm","table-striped-columns","table-hover","mb-0",2,"font-size","10px","table-layout","fixed"],[1,"position-sticky","z-1",2,"top","0px"],["scope","col",1,"bg-gradient",2,"width","8%"],["scope","col",1,"bg-gradient",2,"width","28%"],["scope","col",1,"text-center","bg-gradient",2,"width","10%"],["scope","col",1,"text-center","bg-gradient",2,"width","15%"],["scope","row"],[1,"btn","btn-outline-success","p-1","rounded-top-0","w-100","d-flex","justify-content-between","mt-auto","opacity-85",3,"click"],["icon","iconoir:lens-plus"],["icon","mdi:plus"],[1,"dropdown-item","cursor-pointer","px-2",3,"click"],[1,"text-truncate","text-center"],["iconSize","16px","buttonIcon","iconoir:trash",1,"btn","p-0","btn-warning","opacity-50","m-auto",3,"click"],[1,"text-truncate1",3,"click"],[1,"text-truncate","text-center","p-0"],["iconSize","24px","buttonIcon","iconoir:edit",1,"btn","p-0","rounded","btn-secondary","m-auto","opacity-75",3,"click"],["colspan","8",1,"fst-italic","text-center","bg-body-tertiary","text-muted"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"button",1),n(2),i(),o(3,"ul",2),M(4,ee,3,12,"li",3,v),i(),o(6,"div",4)(7,"input",5),z("ngModelChange",function(l){return V(r.nameFilter,l)||(r.nameFilter=l),l}),i(),o(8,"button",6),s("click",function(){return r.nameFilter.set("")}),i()()(),o(9,"div",7)(10,"table",8)(11,"thead",9)(12,"tr"),f(13,"th",10),o(14,"th",11),n(15,"Name"),i(),o(16,"th",12),n(17,"Prot"),i(),o(18,"th",12),n(19,"Carbs"),i(),o(20,"th",12),n(21,"Fats"),i(),o(22,"th",12),n(23,"Fiber"),i(),o(24,"th",13),n(25,"KCal"),i(),f(26,"th",10),i()(),o(27,"tbody"),M(28,te,17,10,"tr",14,v,!1,oe,3,0,"tr"),i()()(),o(31,"button",15),s("click",function(){return r.addFood()}),f(32,"iconify",16),n(33," Add a food "),f(34,"iconify",17),i()),t&2&&(a(),b("background-color",r.foodMacroCategoryMap[r.selectedMacroCategory().value].bgColor),a(),_(" ",r.selectedMacroCategory().label," "),a(2),C(r.macroCategories),a(3),T("ngModel",r.nameFilter),a(),D("iconSize","16px"),a(20),C(r.foods()))},dependencies:[J,A,B,O,$,K],styles:['thead[_ngcontent-%COMP%]:after{content:"";display:block;height:2px;background-color:#aaa;width:100%;position:absolute;bottom:0;left:0}']})};export{X as MyFoods};
