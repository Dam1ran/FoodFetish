import{a as V}from"./chunk-C5HAGRDK.js";import{a as R}from"./chunk-YK4IVKO5.js";import{b as j,f as L,g as E,t as U,w as x}from"./chunk-ES6AZSV6.js";import"./chunk-2NV76B7Q.js";import{l as D,t as T}from"./chunk-JNNI6R4E.js";import{Eb as c,Fa as m,Nb as F,Ob as I,Pb as v,Ub as a,Wa as w,Wb as g,aa as y,fa as l,ga as d,ob as f,pb as r,qb as s,rc as h,xb as b}from"./chunk-DAZPDLGM.js";var A=["jsonUploadFoods"],M=["jsonUploadRecipes"],O=["jsonUploadDiary"],k=class _{toastsService=y(V);foodsService=y(j);recipesService=y(R);diaryLogService=y(x);jsonUploadFoodsInput=h("jsonUploadFoods");onLoadFoodsFromFile(u){let o=u.target;if(o.files?.length!==1){this.jsonUploadFoodsInput().nativeElement.value="";return}let e=o.files?.[0],t=new FileReader;t.onload=n=>{let i=n.target?.result;if(i){let p=JSON.parse(i);if(!Array.isArray(p)||!p.every(S=>L(S))){this.toastsService.showAsWarning("Wrong food data",{headerText:null,delayMs:5e3}),console.warn("Wrong food data");return}if(this.foodsService.setFoods(p),this.foodsService.foods()?.length===1){this.toastsService.showAsInformation("Loaded 1 food",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.foodsService.foods()?.length} foods`,{headerText:null,delayMs:5e3})}},t.readAsText(e),this.jsonUploadFoodsInput().nativeElement.value=""}jsonUploadRecipesInput=h("jsonUploadRecipes");onLoadRecipesFromFile(u){let o=u.target;if(o.files?.length!==1){this.jsonUploadRecipesInput().nativeElement.value="";return}let e=o.files?.[0],t=new FileReader;t.onload=n=>{let i=n.target?.result;if(i){let p=JSON.parse(i);if(!Array.isArray(p)||!p.every(S=>U(S))){this.toastsService.showAsWarning("Wrong recipes data",{headerText:null,delayMs:5e3}),console.warn("Wrong recipes data");return}if(this.recipesService.setRecipes(p),this.recipesService.recipes()?.length===1){this.toastsService.showAsInformation("Loaded 1 recipe",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.recipesService.recipes()?.length} recipes`,{headerText:null,delayMs:5e3})}},t.readAsText(e),this.jsonUploadRecipesInput().nativeElement.value=""}jsonUploadDiaryInput=h("jsonUploadDiary");onLoadDiaryFromFile(u){let o=u.target;if(o.files?.length!==1){this.jsonUploadDiaryInput().nativeElement.value="";return}let e=o.files?.[0],t=new FileReader;t.onload=n=>{let i=n.target?.result;if(i){let p=JSON.parse(i);if(!Array.isArray(p.diaryDays)){this.toastsService.showAsWarning("Wrong diary data",{headerText:null,delayMs:5e3}),console.warn("Wrong diary data");return}if(this.diaryLogService.setDiary(p),this.diaryLogService.diaryLog()?.diaryDays?.length===1){this.toastsService.showAsInformation("Loaded 1 diary day",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.diaryLogService.diaryLog()?.diaryDays?.length} diary days`,{headerText:null,delayMs:5e3})}},t.readAsText(e),this.jsonUploadDiaryInput().nativeElement.value=""}router=y(D);clearAllMemory(){localStorage.clear(),this.router.navigate([T.home]),setTimeout(()=>{window.location.reload()},50)}static \u0275fac=function(o){return new(o||_)};static \u0275cmp=w({type:_,selectors:[["app-options"]],viewQuery:function(o,e){o&1&&F(e.jsonUploadFoodsInput,A,5)(e.jsonUploadRecipesInput,M,5)(e.jsonUploadDiaryInput,O,5),o&2&&I(3)},decls:39,vars:6,consts:[["jsonUploadFoods",""],["jsonUploadRecipes",""],["jsonUploadDiary",""],[1,"content-wrapper"],[1,"border","rounded","m-1","mb-0"],[1,"mx-1"],[1,"d-flex","justify-content-between","p-1","bg-body-tertiary"],["iconSize","24px","buttonIcon","iconoir:save-floppy-disk",1,"btn","btn-outline-secondary","p-0","px-1","rounded-0",3,"click","disabled"],["type","file","accept",".json",1,"d-none",3,"change"],["iconSize","24px","buttonIcon","iconoir:load-action-floppy",1,"btn","btn-outline-secondary","p-0","px-1","rounded-0",3,"click"],[1,"border","rounded","m-1","mb-0","bg-warning-subtle"],[1,"d-flex","flex-column","align-items-center","p-1","pt-0","bg-body-tertiary"],[1,"p-1","text-warning",2,"font-size","12px"],["iconSize","24px","buttonIcon","grommet-icons:clear",1,"btn","btn-outline-warning","p-0","px-1","opacity-25",3,"click"]],template:function(o,e){if(o&1){let t=b();r(0,"div",3)(1,"div",4)(2,"div",5),a(3,"Foods"),s(),r(4,"div",6)(5,"button",7),c("click",function(){return l(t),d(e.foodsService.downloadFoods())}),a(6),s(),r(7,"input",8,0),c("change",function(i){return l(t),d(e.onLoadFoodsFromFile(i))}),s(),r(9,"button",9),c("click",function(){l(t);let i=v(8);return d(i.click())}),a(10," Load "),s()()(),r(11,"div",4)(12,"div",5),a(13,"Recipes"),s(),r(14,"div",6)(15,"button",7),c("click",function(){return l(t),d(e.recipesService.downloadRecipes())}),a(16),s(),r(17,"input",8,1),c("change",function(i){return l(t),d(e.onLoadRecipesFromFile(i))}),s(),r(19,"button",9),c("click",function(){l(t);let i=v(18);return d(i.click())}),a(20," Load "),s()()(),r(21,"div",4)(22,"div",5),a(23,"Main diary"),s(),r(24,"div",6)(25,"button",7),c("click",function(){return l(t),d(e.diaryLogService.downloadDiary())}),a(26),s(),r(27,"input",8,2),c("change",function(i){return l(t),d(e.onLoadDiaryFromFile(i))}),s(),r(29,"button",9),c("click",function(){l(t);let i=v(28);return d(i.click())}),a(30," Load "),s()()(),r(31,"div",10)(32,"div",5),a(33,"Storage reset"),s(),r(34,"div",11)(35,"div",12),a(36," Make sure you saved your data before clearing... "),s(),r(37,"button",13),c("click",function(){return l(t),d(e.clearAllMemory())}),a(38," Clear all memory! "),s()()()()}if(o&2){let t,n;m(5),f("disabled",!e.foodsService.foods().length),m(),g(" Save (",e.foodsService.foods().length,") "),m(9),f("disabled",!e.recipesService.recipes().length),m(),g(" Save (",e.recipesService.recipes().length,") "),m(9),f("disabled",!(!((t=e.diaryLogService.diaryLog())==null||t.diaryDays==null)&&t.diaryDays.length)),m(),g(" Save (",((n=e.diaryLogService.diaryLog())==null||n.diaryDays==null?null:n.diaryDays.length)||0,") ")}},dependencies:[E],encapsulation:2})};export{k as Options};
