import{a as W,b as N}from"./chunk-TDDOQAOR.js";import"./chunk-UEJSXAPY.js";import{a as z}from"./chunk-2KTHP7SW.js";import{a as O}from"./chunk-3OJFEKT3.js";import{c as U,g as R,s as M,v as A,w as C}from"./chunk-G7KJV4CT.js";import{l as j,t as L}from"./chunk-MAWMYTZY.js";import"./chunk-TTUD5ZDE.js";import{Fb as c,Ga as m,Hb as f,Ob as k,Pb as F,Qb as _,Ub as w,Vb as a,Wb as V,Xa as I,Xb as b,aa as g,fa as l,fc as D,ga as d,jb as T,kb as E,pb as y,qb as n,rb as o,sc as h,yb as S}from"./chunk-HXGKTDM5.js";var J=["jsonUploadFoods"],Q=["jsonUploadRecipes"],$=["jsonUploadDiary"],G=(v,p)=>({"btn-secondary":v,"btn-outline-secondary":p});function q(v,p){if(v&1){let t=S();n(0,"button",18),c("click",function(){l(t);let e=f();return d(e.googleDriveService.signIn())}),a(1," Sign in with Google "),o()}}function B(v,p){if(v&1){let t=S();n(0,"button",19),c("click",function(){l(t);let e=f();return d(e.googleDriveService.uploadToDrive())}),a(1," Upload to Drive "),o(),n(2,"button",20),c("click",function(){l(t);let e=f();return d(e.googleDriveService.downloadFromDrive())}),a(3," Download from Drive "),o(),n(4,"div",21),a(5),o(),n(6,"button",22),c("click",function(){l(t);let e=f();return d(e.googleDriveService.signOut())}),a(7," Sign out "),o()}if(v&2){let t=f();w(D(7,G,!t.googleDriveService.isSyncing(),t.googleDriveService.isSyncing())),y("disabled",t.googleDriveService.isSyncing()),m(2),w(D(10,G,!t.googleDriveService.isSyncing(),t.googleDriveService.isSyncing())),y("disabled",t.googleDriveService.isSyncing()),m(3),V(t.googleDriveService.userEmail())}}var H=class v{toastsService=g(W);foodsService=g(U);recipesService=g(C);diaryLogService=g(A);imageStoreService=g(z);googleDriveService=g(N);jsonUploadFoodsInput=h("jsonUploadFoods");onLoadFoodsFromFile(p){let t=p.target;if(t.files?.length!==1){this.jsonUploadFoodsInput().nativeElement.value="";return}let i=t.files?.[0],e=new FileReader;e.onload=s=>{let r=s.target?.result;if(r){let u=JSON.parse(r);if(!Array.isArray(u)||!u.every(x=>R(x))){this.toastsService.showAsWarning("Wrong food data",{headerText:null,delayMs:5e3}),console.warn("Wrong food data");return}if(this.foodsService.setFoods(u),this.foodsService.foods()?.length===1){this.toastsService.showAsInformation("Loaded 1 food",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.foodsService.foods()?.length} foods`,{headerText:null,delayMs:5e3})}},e.readAsText(i),this.jsonUploadFoodsInput().nativeElement.value=""}jsonUploadRecipesInput=h("jsonUploadRecipes");onLoadRecipesFromFile(p){let t=p.target;if(t.files?.length!==1){this.jsonUploadRecipesInput().nativeElement.value="";return}let i=t.files?.[0],e=new FileReader;e.onload=s=>{let r=s.target?.result;if(r){let u=JSON.parse(r);if(!Array.isArray(u)||!u.every(x=>M(x))){this.toastsService.showAsWarning("Wrong recipes data",{headerText:null,delayMs:5e3}),console.warn("Wrong recipes data");return}if(this.recipesService.setRecipes(u),this.recipesService.recipes()?.length===1){this.toastsService.showAsInformation("Loaded 1 recipe",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.recipesService.recipes()?.length} recipes`,{headerText:null,delayMs:5e3})}},e.readAsText(i),this.jsonUploadRecipesInput().nativeElement.value=""}jsonUploadDiaryInput=h("jsonUploadDiary");onLoadDiaryFromFile(p){let t=p.target;if(t.files?.length!==1){this.jsonUploadDiaryInput().nativeElement.value="";return}let i=t.files?.[0],e=new FileReader;e.onload=s=>{let r=s.target?.result;if(r){let u=JSON.parse(r);if(!Array.isArray(u.diaryDays)){this.toastsService.showAsWarning("Wrong diary data",{headerText:null,delayMs:5e3}),console.warn("Wrong diary data");return}if(this.diaryLogService.setDiary(u),this.diaryLogService.diaryLog()?.diaryDays?.length===1){this.toastsService.showAsInformation("Loaded 1 diary day",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.diaryLogService.diaryLog()?.diaryDays?.length} diary days`,{headerText:null,delayMs:5e3})}},e.readAsText(i),this.jsonUploadDiaryInput().nativeElement.value=""}router=g(j);clearAllMemory(){localStorage.clear(),this.imageStoreService.deleteDatabase(),this.router.navigate([L.home]),setTimeout(()=>{window.location.reload()},50)}static \u0275fac=function(t){return new(t||v)};static \u0275cmp=I({type:v,selectors:[["app-options"]],viewQuery:function(t,i){t&1&&k(i.jsonUploadFoodsInput,J,5)(i.jsonUploadRecipesInput,Q,5)(i.jsonUploadDiaryInput,$,5),t&2&&F(3)},decls:48,vars:7,consts:[["jsonUploadFoods",""],["jsonUploadRecipes",""],["jsonUploadDiary",""],[1,"content-wrapper"],[1,"border","rounded","m-1","mb-0"],[1,"mx-1"],[1,"d-flex","justify-content-between","p-1","bg-body-tertiary"],["iconSize","24px","buttonIcon","iconoir:save-floppy-disk",1,"btn","btn-outline-secondary","p-0","px-1","rounded-0",3,"click","disabled"],["type","file","accept",".json",1,"d-none",3,"change"],["iconSize","24px","buttonIcon","iconoir:load-action-floppy",1,"btn","btn-outline-secondary","p-0","px-1","rounded-0",3,"click"],[1,"mx-1","d-flex","justify-content-between","align-items-center"],[1,"text-muted","fst-italic","opacity-75",2,"font-size","10px"],[1,"d-flex","flex-column","gap-1","p-1","bg-body-tertiary"],["iconSize","24px","buttonIcon","iconoir:google",1,"btn","btn-secondary","p-0","px-1","rounded","opacity-75"],[1,"border","rounded","m-1","mb-0","bg-warning-subtle"],[1,"d-flex","flex-column","align-items-center","p-1","pt-0","bg-body-tertiary"],[1,"p-1","text-warning",2,"font-size","12px"],["iconSize","24px","buttonIcon","grommet-icons:clear",1,"btn","btn-outline-warning","p-0","px-1","opacity-25",3,"click"],["iconSize","24px","buttonIcon","iconoir:google",1,"btn","btn-secondary","p-0","px-1","rounded","opacity-75",3,"click"],["iconSize","24px","buttonIcon","iconoir:cloud-upload",1,"btn","p-0","px-1","rounded","opacity-40",3,"click","disabled"],["iconSize","24px","buttonIcon","iconoir:cloud-download",1,"btn","p-0","px-1","rounded","opacity-40",3,"click","disabled"],[1,"mt-4","text-muted","text-truncate","fst-italic","opacity-40",2,"font-size","14px","line-height","16px"],["iconSize","24px","buttonIcon","iconoir:log-out",1,"btn","btn-secondary","p-0","px-1","rounded","opacity-75",3,"click"]],template:function(t,i){if(t&1){let e=S();n(0,"div",3)(1,"div",4)(2,"div",5),a(3,"Foods"),o(),n(4,"div",6)(5,"button",7),c("click",function(){return l(e),d(i.foodsService.downloadFoods())}),a(6),o(),n(7,"input",8,0),c("change",function(r){return l(e),d(i.onLoadFoodsFromFile(r))}),o(),n(9,"button",9),c("click",function(){l(e);let r=_(8);return d(r.click())}),a(10," Load "),o()()(),n(11,"div",4)(12,"div",5),a(13,"Recipes"),o(),n(14,"div",6)(15,"button",7),c("click",function(){return l(e),d(i.recipesService.downloadRecipes())}),a(16),o(),n(17,"input",8,1),c("change",function(r){return l(e),d(i.onLoadRecipesFromFile(r))}),o(),n(19,"button",9),c("click",function(){l(e);let r=_(18);return d(r.click())}),a(20," Load "),o()()(),n(21,"div",4)(22,"div",10)(23,"div"),a(24,"Main diary"),o(),n(25,"span",11),a(26,"*Images will be skipped"),o()(),n(27,"div",6)(28,"button",7),c("click",function(){return l(e),d(i.diaryLogService.downloadDiary())}),a(29),o(),n(30,"input",8,2),c("change",function(r){return l(e),d(i.onLoadDiaryFromFile(r))}),o(),n(32,"button",9),c("click",function(){l(e);let r=_(31);return d(r.click())}),a(33," Load "),o()()(),n(34,"div",4)(35,"div",5),a(36,"Google Drive sync"),o(),n(37,"div",12),T(38,q,2,0,"button",13)(39,B,8,13),o()(),n(40,"div",14)(41,"div",5),a(42,"Storage reset"),o(),n(43,"div",15)(44,"div",16),a(45," Make sure you saved your data before clearing... "),o(),n(46,"button",17),c("click",function(){return l(e),d(i.clearAllMemory())}),a(47," Clear all memory! "),o()()()()}if(t&2){let e,s;m(5),y("disabled",!i.foodsService.foods().length),m(),b(" Save (",i.foodsService.foods().length,") "),m(9),y("disabled",!i.recipesService.recipes().length),m(),b(" Save (",i.recipesService.recipes().length,") "),m(12),y("disabled",!(!((e=i.diaryLogService.diaryLog())==null||e.diaryDays==null)&&e.diaryDays.length)),m(),b(" Save (",((s=i.diaryLogService.diaryLog())==null||s.diaryDays==null?null:s.diaryDays.length)||0,") "),m(9),E(i.googleDriveService.isSignedIn()?39:38)}},dependencies:[O],encapsulation:2})};export{H as Options};
