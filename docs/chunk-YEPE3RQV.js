import{d as E}from"./chunk-GNB2QRYG.js";import{a as X}from"./chunk-3OJFEKT3.js";import{P as Y,Q as Z,e as A,h as W,j as q,m as K,r as G,w as Q,x as k,y as U}from"./chunk-PXXMBKHJ.js";import{l as H,t as S}from"./chunk-MAWMYTZY.js";import{a as J}from"./chunk-TTUD5ZDE.js";import{Fb as g,Ga as n,Hb as y,Rb as s,Sb as T,Tb as N,Ub as z,Vb as c,Wb as V,Xa as I,Xb as m,Yb as $,Zb as L,_b as j,a as D,aa as b,ec as R,fa as u,fc as B,ga as f,jb as C,kb as M,lb as v,nb as F,nc as O,ob as h,pb as P,qb as i,ra as _,rb as r,rc as x,sb as p,yb as w}from"./chunk-HXGKTDM5.js";var te=(a,t)=>({"text-decoration":a,"letter-spacing":t,"text-underline-offset":"2px"}),oe=a=>({"fst-italic":a});function ie(a,t){if(a&1){let e=w();i(0,"li")(1,"span",19),g("click",function(){let d=u(e).$implicit,l=y();return f(l.selectedMacroCategory.set(d))}),c(2),r()()}if(a&2){let e=t.$implicit,o=y();s("background-color",o.foodMacroCategoryMap[e.value].bgColor);let d=e.label===o.selectedMacroCategory().label;n(),N(B(7,te,d?"underline":"unset",d?"1px":"0.25px")),z(R(10,oe,d)),n(),m(" ",e.label," ")}}function re(a,t){a&1&&p(0,"iconify",26)}function ne(a,t){a&1&&p(0,"iconify",26)}function ae(a,t){if(a&1){let e=w();i(0,"tr",20),p(1,"td",21),r(),i(2,"tr",20)(3,"td",22)(4,"button",23),g("click",function(){let d=u(e).$implicit,l=y();return f(l.deleteFood(d))}),r()(),i(5,"td",24),g("click",function(){let d=u(e).$implicit,l=y();return f(l.addFoodToDiaryOrRecipe(d))}),i(6,"div",25),C(7,re,1,0,"iconify",26),i(8,"div",27),c(9),r(),C(10,ne,1,0,"iconify",26),r()(),i(11,"td",22)(12,"button",28),g("click",function(){let d=u(e).$implicit,l=y();return f(l.editFood(d))}),r()()(),i(13,"tr",29)(14,"td",30),c(15),r(),i(16,"td",31),c(17),r(),i(18,"td",32),c(19),r(),i(20,"td",33),c(21),r(),i(22,"td",34),c(23),r()()}if(a&2){let e=t.$implicit,o=y();n(5),s("background-color",o.foodMacroCategoryMap[e.macroCategory].bgColor),T("text-decoration-underline",!!o.diaryDate()||!!o.recipeId()),n(2),M(e.barcode?7:-1),n(2),V(e.name),n(),M(e.barcode?10:-1),n(4),s("background-color",`rgb(from ${o.foodMacroCategoryMap[e.macroCategory].bgColor} r g b / 0.25)`),n(),m(" ",e.protein," "),n(),s("background-color",`rgb(from ${o.foodMacroCategoryMap[e.macroCategory].bgColor} r g b / 0.2)`),n(),m(" ",e.carbs," "),n(),s("background-color",`rgb(from ${o.foodMacroCategoryMap[e.macroCategory].bgColor} r g b / 0.25)`),n(),m(" ",e.fats," "),n(),s("background-color",`rgb(from ${o.foodMacroCategoryMap[e.macroCategory].bgColor} r g b / 0.25)`),n(),m(" ",e.fiber," "),n(),s("background-color",`rgb(from ${o.foodMacroCategoryMap[e.macroCategory].bgColor} r g b / 0.25)`),n(),m(" ",e.calories," ")}}function ce(a,t){a&1&&(i(0,"tr")(1,"td",35),c(2," No foods found in selected category... "),r()())}var ee=class a{modalService=b(G);myFoodsService=b(Q);recipesService=b(Z);foodMacroCategoryMap=U;macroCategories=Object.keys(k).filter(t=>!isNaN(Number(t))).map(t=>({label:k[t],value:+t}));selectedMacroCategory=_(this.macroCategories[0]);nameFilter=_("");foods=O(()=>this.myFoodsService.foods().filter(t=>t.macroCategory===this.selectedMacroCategory().value||this.selectedMacroCategory().value===0).filter(t=>t.name?.toLowerCase().includes(this.nameFilter().toLowerCase())).sort((t,e)=>t.macroCategory-e.macroCategory||t.name?.localeCompare(e.name)));diaryDate=x("");mealPosition=x(0);recipeId=x("");addFood(){this.modalService.open(E)}diaryLogService=b(Y);router=b(H);addFoodToDiaryOrRecipe(t){this.diaryDate()&&this.mealPosition()?(this.diaryLogService.addFood(this.diaryDate(),+this.mealPosition(),t),this.diaryLogService.updateMealTime(this.diaryDate(),this.mealPosition()),this.router.navigate([S.diary],{queryParams:{diaryDate:this.diaryDate()}})):this.recipeId()&&(this.recipesService.addFood(this.recipeId(),t.id),this.router.navigate([S.recipes]))}editFood(t){this.modalService.open(E).componentInstance.food.set(D({barcode:null},t))}deleteFood(t){this.myFoodsService.deleteFood(t)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=I({type:a,selectors:[["ng-component"]],inputs:{diaryDate:[1,"diaryDate"],mealPosition:[1,"mealPosition"],recipeId:[1,"recipeId"]},decls:33,vars:6,consts:[[1,"content-wrapper","d-flex","justify-content-between","gap-2","p-1","bg-body-tertiary","border-bottom"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-secondary","dropdown-toggle","bmw","align-self-center","p-1"],[1,"dropdown-menu","p-0","overflow-hidden","shadow-sm",2,"min-width","120px"],[3,"background-color"],[1,"position-relative"],["type","text","placeholder","Filter by name",1,"form-control","p-1",3,"ngModelChange","ngModel"],["buttonIcon","mdi:close",1,"btn","btn-sm","btn-secondary","p-0","position-absolute","end-0","top-50","translate-middle-y","me-2","z-1",3,"click","iconSize"],[1,"content-wrapper","overflow-y-auto",2,"height","calc(100dvh - 141px)"],[1,"table","table-sm","table-borderless","mb-0",2,"font-size","12px","table-layout","fixed"],[1,"position-sticky","z-1",2,"top","0px"],["scope","col",1,"bg-gradient",2,"width","10%"],["scope","col",1,"text-center","bg-gradient",2,"color","rgb(80, 100, 240)","width","16%"],["scope","col",1,"text-center","bg-gradient",2,"color","rgb(220, 220, 90)","width","16%"],["scope","col",1,"text-center","bg-gradient",2,"color","rgb(200, 160, 30)","width","16%"],["scope","col",1,"text-center","bg-gradient",2,"color","rgb(100, 130, 20)","width","16%"],["scope","col",1,"text-center","bg-gradient",2,"color","rgb(150, 140, 180)","width","16%"],[1,"btn","btn-outline-success","p-2","rounded-top-0","w-100","d-flex","justify-content-between","mt-auto","opacity-85",3,"click"],["icon","iconoir:lens-plus"],["icon","mdi:plus"],[1,"dropdown-item","cursor-pointer","px-2",3,"click"],["scope","row",1,"opacity-90"],["colspan","7",1,"bg-dark",2,"padding","1px 0"],["rowspan","2",1,"bg-dark-subtle"],["iconSize","16px","buttonIcon","iconoir:trash",1,"btn","btn-outline-warning","border-0","p-0","opacity-30","m-auto",3,"click"],["colspan","5",1,"py-1","text-center","opacity-90","fw-semibold",2,"font-size","16px","text-underline-offset","2px","text-shadow","0 0 3px rgba(0, 0, 0, 0.5)",3,"click"],[1,"d-flex","justify-content-between","align-items-center"],["icon","teenyicons:barcode-outline","size","16px",1,"ms-1","opacity-40"],[1,"mx-auto"],["iconSize","24px","buttonIcon","iconoir:edit",1,"btn","p-0","rounded","m-auto","opacity-30",3,"click"],["scope","row"],[1,"text-truncate","text-center","p-0",2,"font-size","12px","text-shadow","0 0 2px rgba(0, 0, 0, 0.5)","color","rgb(80, 100, 240)"],[1,"text-truncate","text-center","p-0",2,"font-size","12px","text-shadow","0 0 2px rgba(0, 0, 0, 0.5)","color","rgb(220, 220, 90)"],[1,"text-truncate","text-center","p-0",2,"font-size","12px","text-shadow","0 0 2px rgba(0, 0, 0, 0.5)","color","rgb(200, 160, 30)"],[1,"text-truncate","text-center","p-0",2,"font-size","12px","text-shadow","0 0 2px rgba(0, 0, 0, 0.5)","color","rgb(100, 130, 20)"],[1,"text-truncate","text-center","p-0",2,"font-size","12px","text-shadow","0 0 2px rgba(0, 0, 0, 0.5)","color","rgb(150, 140, 180)"],["colspan","8",1,"fst-italic","text-center","bg-body-tertiary","text-muted"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"button",1),c(2),r(),i(3,"ul",2),F(4,ie,3,12,"li",3,v),r(),i(6,"div",4)(7,"input",5),j("ngModelChange",function(l){return L(o.nameFilter,l)||(o.nameFilter=l),l}),r(),i(8,"button",6),g("click",function(){return o.nameFilter.set("")}),r()()(),i(9,"div",7)(10,"table",8)(11,"thead",9)(12,"tr"),p(13,"th",10),i(14,"th",11),c(15," Prot "),r(),i(16,"th",12),c(17," Carbs "),r(),i(18,"th",13),c(19," Fats "),r(),i(20,"th",14),c(21," Fiber "),r(),i(22,"th",15),c(23," KCal "),r(),p(24,"th",10),r()(),i(25,"tbody"),F(26,ae,24,22,null,null,v,!1,ce,3,0,"tr"),r()()(),i(29,"button",16),g("click",function(){return o.addFood()}),p(30,"iconify",17),c(31," Add a food "),p(32,"iconify",18),r()),e&2&&(n(),s("background-color",o.foodMacroCategoryMap[o.selectedMacroCategory().value].bgColor),n(),m(" ",o.selectedMacroCategory().label," "),n(2),h(o.macroCategories),n(3),$("ngModel",o.nameFilter),n(),P("iconSize","16px"),n(18),h(o.foods()))},dependencies:[X,K,A,W,q,J],styles:['thead[_ngcontent-%COMP%]:after{content:"";display:block;height:2px;background-color:#aaa;width:100%;position:absolute;bottom:0;left:0}']})};export{ee as MyFoods};
