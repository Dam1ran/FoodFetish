import{a as V}from"./chunk-C53V62I2.js";import{a as T,b as k}from"./chunk-NN3LDBVC.js";import{e as j,f as E,q as U}from"./chunk-CNEF6CAU.js";import"./chunk-7QS2YA2B.js";import{k as I,s as R}from"./chunk-M4R7CCZ2.js";import{Ab as c,Ga as f,Jb as F,Kb as x,Lb as h,Qb as a,Sb as S,Xa as b,aa as m,fa as l,ga as d,nc as y,pb as g,qb as n,rb as r,wb as w}from"./chunk-EJNIJWGF.js";var M=["jsonUploadFoods"],O=["jsonUploadRecipes"],A=class _{toastsService=m(V);foodsService=m(T);recipesService=m(k);jsonUploadFoodsInput=y("jsonUploadFoods");onLoadFoodsFromFile(u){let t=u.target;if(t.files?.length!==1){this.jsonUploadFoodsInput().nativeElement.value="";return}let e=t.files?.[0],o=new FileReader;o.onload=s=>{let i=s.target?.result;if(i){let p=JSON.parse(i);if(!Array.isArray(p)||!p.every(v=>j(v))){this.toastsService.showAsWarning("Wrong food data",{headerText:null,delayMs:5e3}),console.warn("Wrong food data");return}if(this.foodsService.setFoods(p),this.foodsService.foods()?.length===1){this.toastsService.showAsInformation("Loaded 1 food",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.foodsService.foods()?.length} foods`,{headerText:null,delayMs:5e3})}},o.readAsText(e),this.jsonUploadFoodsInput().nativeElement.value=""}jsonUploadRecipesInput=y("jsonUploadRecipes");onLoadRecipesFromFile(u){let t=u.target;if(t.files?.length!==1){this.jsonUploadRecipesInput().nativeElement.value="";return}let e=t.files?.[0],o=new FileReader;o.onload=s=>{let i=s.target?.result;if(i){let p=JSON.parse(i);if(!Array.isArray(p)||!p.every(v=>U(v))){this.toastsService.showAsWarning("Wrong recipes data",{headerText:null,delayMs:5e3}),console.warn("Wrong recipes data");return}if(this.recipesService.setRecipes(p),this.recipesService.recipes()?.length===1){this.toastsService.showAsInformation("Loaded 1 recipe",{headerText:null,delayMs:5e3});return}this.toastsService.showAsInformation(`Loaded ${this.recipesService.recipes()?.length} recipes`,{headerText:null,delayMs:5e3})}},o.readAsText(e),this.jsonUploadRecipesInput().nativeElement.value=""}router=m(I);clearAllMemory(){localStorage.clear(),this.router.navigate([R.home]),setTimeout(()=>{window.location.reload()},50)}static \u0275fac=function(t){return new(t||_)};static \u0275cmp=b({type:_,selectors:[["app-options"]],viewQuery:function(t,e){t&1&&F(e.jsonUploadFoodsInput,M,5)(e.jsonUploadRecipesInput,O,5),t&2&&x(2)},decls:29,vars:4,consts:[["jsonUploadFoods",""],["jsonUploadRecipes",""],[1,"content-wrapper"],[1,"border","rounded","m-1","mb-0"],[1,"mx-1"],[1,"d-flex","justify-content-between","p-1","bg-body-tertiary"],["iconSize","24px","buttonIcon","iconoir:save-floppy-disk",1,"btn","btn-outline-secondary","p-0","px-1","rounded-0",3,"click","disabled"],["type","file","accept",".json",1,"d-none",3,"change"],["iconSize","24px","buttonIcon","iconoir:load-action-floppy",1,"btn","btn-outline-secondary","p-0","px-1","rounded-0",3,"click"],[1,"border","rounded","m-1","mb-0","bg-warning-subtle"],[1,"d-flex","flex-column","align-items-center","p-1","pt-0","bg-body-tertiary"],[1,"p-1","text-warning",2,"font-size","12px"],["iconSize","24px","buttonIcon","grommet-icons:clear",1,"btn","btn-outline-warning","p-0","px-1","opacity-25",3,"click"]],template:function(t,e){if(t&1){let o=w();n(0,"div",2)(1,"div",3)(2,"div",4),a(3,"Foods"),r(),n(4,"div",5)(5,"button",6),c("click",function(){return l(o),d(e.foodsService.downloadFoods())}),a(6),r(),n(7,"input",7,0),c("change",function(i){return l(o),d(e.onLoadFoodsFromFile(i))}),r(),n(9,"button",8),c("click",function(){l(o);let i=h(8);return d(i.click())}),a(10," Load "),r()()(),n(11,"div",3)(12,"div",4),a(13,"Recipes"),r(),n(14,"div",5)(15,"button",6),c("click",function(){return l(o),d(e.recipesService.downloadRecipes())}),a(16),r(),n(17,"input",7,1),c("change",function(i){return l(o),d(e.onLoadRecipesFromFile(i))}),r(),n(19,"button",8),c("click",function(){l(o);let i=h(18);return d(i.click())}),a(20," Load "),r()()(),n(21,"div",9)(22,"div",4),a(23,"Storage reset"),r(),n(24,"div",10)(25,"div",11),a(26," Make sure you saved your data before clearing... "),r(),n(27,"button",12),c("click",function(){return l(o),d(e.clearAllMemory())}),a(28," Clear all memory! "),r()()()()}t&2&&(f(5),g("disabled",!e.foodsService.foods().length),f(),S(" Save (",e.foodsService.foods().length,") "),f(9),g("disabled",!e.recipesService.recipes().length),f(),S(" Save (",e.recipesService.recipes().length,") "))},dependencies:[E],encapsulation:2})};export{A as Options};
